(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9915],{309915:function(e,n,t){"use strict";t.r(n),t.d(n,{Manager:function(){return Te},default:function(){return We}});var i,a=t(552322),s=t(202784),r=t(351253),o=t(323440),c=t(5693),l=t(860644),d=t(223258),m=t(864453),u=t(736367),_=t(585421),p=t(548090),f=t(829051),g=t(387394),v=t(850930),b=t(712765),h=t(31856),y=t(128680),S=t(178234),x=t(215873),N=t(876566),C=t.n(N),j=t(914463),k=t(165846),E=function(e){var n=e.defaultChecked,t=e.checked,i=e.onChange,s=e.inRead,r=(0,f.useSelector)((function(e){return e.space.curSpaceInfo})),c=[{title:(0,o.t)(o.Strings.add_sub_admin_title_workbench),key:"workbench",desc:(0,o.t)(o.Strings.add_sub_admin_workbench_configuration),checkList:[{name:(0,o.t)(o.Strings.role_permission_manage_workbench),value:"MANAGE_WORKBENCH",disabled:!1}]},{title:(0,o.t)(o.Strings.add_sub_admin_title_member_team),desc:(0,o.t)(o.Strings.add_sub_admin_contacts_configuration),key:"address",checkList:[{name:(0,o.t)(o.Strings.role_permission_manage_team),value:"MANAGE_TEAM",disabled:!r||(null===j.isSocialPlatformEnabled||void 0===j.isSocialPlatformEnabled?void 0:(0,j.isSocialPlatformEnabled)(r))&&!(null===j.isSocialDingTalk||void 0===j.isSocialDingTalk?void 0:(0,j.isSocialDingTalk)(r))&&!(null===j.isSocialWecom||void 0===j.isSocialWecom?void 0:(0,j.isSocialWecom)(r))},{name:(0,o.t)(o.Strings.role_permission_manage_member),value:"MANAGE_MEMBER",disabled:!r||(null===j.isSocialPlatformEnabled||void 0===j.isSocialPlatformEnabled?void 0:(0,j.isSocialPlatformEnabled)(r))&&!(null===j.isSocialDingTalk||void 0===j.isSocialDingTalk?void 0:(0,j.isSocialDingTalk)(r))&&!(null===j.isSocialWecom||void 0===j.isSocialWecom?void 0:(0,j.isSocialWecom)(r))},{name:(0,o.t)(o.Strings.role_permission_manage_role),value:"MANAGE_ROLE",disabled:!r||(null===j.isSocialPlatformEnabled||void 0===j.isSocialPlatformEnabled?void 0:(0,j.isSocialPlatformEnabled)(r))&&!(null===j.isSocialDingTalk||void 0===j.isSocialDingTalk?void 0:(0,j.isSocialDingTalk)(r))&&!(null===j.isSocialWecom||void 0===j.isSocialWecom?void 0:(0,j.isSocialWecom)(r))}]},{title:(0,o.t)(o.Strings.company_security),desc:(0,o.t)(o.Strings.add_sub_admin_permissions_configuration),key:"security",checkList:[{name:(0,o.t)(o.Strings.role_permission_manage_security),value:"MANAGE_SECURITY",disabled:!1}]},{title:(0,o.t)(o.Strings.more_setting),desc:(0,o.t)(o.Strings.more_setting_tip),key:"shelfManage",checkList:[{name:(0,o.t)(o.Strings.manage_template_center),value:"MANAGE_TEMPLATE",disabled:!1},{name:(0,o.t)(o.Strings.manage_widget_center),value:"MANAGE_WIDGET",disabled:!1}]}];return(0,a.jsx)("div",{className:C().cardWrap,children:c.map((function(e){return(0,a.jsxs)("div",{className:C().permissionCard,children:[(0,a.jsxs)("div",{className:C().title,children:[(0,a.jsx)("span",{children:e.title}),(0,a.jsx)(d.u,{title:e.desc,placement:"top",trigger:"click",showTipAnyway:!0,children:(0,a.jsx)("span",{children:(0,a.jsx)(k.QuestionCircleOutlined,{})})})]}),(0,a.jsx)("div",{className:C().checkboxWrap,children:e.checkList.map((function(e){return(0,a.jsx)("div",{className:C().checkboxItem,children:(0,a.jsx)(x.Z,{onChange:function(e){return function(e,n){i&&i(e,n)}(e.target.value,e.target.checked)},value:e.value,defaultChecked:n?n.includes(e.value):void 0,checked:t?t.includes(e.value):void 0,disabled:Boolean(s||e.disabled),children:e.name.toString()})},e.value)}))})]},e.key)}))})},A=t(944958),I=t.n(A),M={read:(0,o.t)(o.Strings.sub_admin_view),edit:(0,o.t)(o.Strings.sub_admin_edit),add:(0,o.t)(o.Strings.sub_admin_add)};!function(e){e.Read="read",e.Edit="edit",e.Add="add"}(i||(i={}));var T=function(e){var n=e.cancelModal,t=e.editOrReadSubMainInfo,c=e.existSubAdminNum,l=e.source,d=(0,f.useSelector)((function(e){return{subAdminList:e.spacePermissionManage.subAdminListData?e.spacePermissionManage.subAdminListData.records:[],userInfo:e.user.info}}),f.shallowEqual),u=d.subAdminList,_=d.userInfo,p=(0,f.useSelector)((function(e){return e.space.curSpaceInfo})),x=(0,s.useState)(!1),N=x[0],C=x[1],A=(0,s.useState)([]),T=A[0],W=A[1],w=(0,s.useState)([]),P=w[0],Z=w[1],B=(0,s.useState)(!1),L=B[0],U=B[1],D=(0,s.useState)(""),O=D[0],z=D[1],R=function(){U(!1),n()},G=(0,m.gC)({fromUserId:_.uuid,spaceId:_.spaceId}).addSubAdminAndNotice,H=(0,g.Z)((0,m.dJ)(t?t.id:"",O,P,R),1)[0];(0,s.useEffect)((function(){l!==i.Add&&t&&(z(t.memberId),o.Api.subAdminPermission(t.memberId).then((function(e){var n=e.data,t=n.success,i=n.data;t&&Z(i.resources)})))}),[t,l]);var F=function(e){var n=T.filter((function(n){return n.unitId!==e}));W(n)},V=l!==i.Add&&t?(null===j.getSocialWecomUnitName||void 0===j.getSocialWecomUnitName?void 0:(0,j.getSocialWecomUnitName)({name:null===t||void 0===t?void 0:t.memberName,isModified:null===t||void 0===t?void 0:t.isMemberNameModified,spaceInfo:p}))||(null===t||void 0===t?void 0:t.memberName):"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(y.Modal,{footer:null,visible:!0,onCancel:R,title:(0,a.jsx)("div",{children:M[l]}),className:I().addAdminModal,centered:!0,maskClosable:!0,width:640,children:[l!==i.Add&&t?(0,a.jsx)(h.b,{unitId:t.memberId,avatar:t.avatar,avatarColor:t.avatarColor,name:t.memberName,nickName:t.nickName,deletable:!1,title:V},t.memberId):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Button,{size:"small",onClick:function(){return C(!0)},prefixIcon:(0,a.jsx)(k.AddOutlined,{size:12,color:"currentColor",className:I().addBtnIcon}),children:(0,o.t)(o.Strings.add_member)}),(0,a.jsx)("div",{className:I().selectedWrapper,children:T.length>0&&T.map((function(e){var n=(0,S.zb)(e),t=(0,j.getSocialWecomUnitName)({name:null===e||void 0===e?void 0:e.originName,isModified:null===e||void 0===e?void 0:e.isMemberNameModified,spaceInfo:p})||(null===e||void 0===e?void 0:e.originName);return(0,a.jsx)(h.b,{unitId:e.unitId,avatar:n.avatar,avatarColor:n.avatarColor,nickName:n.nickName,name:n.name,className:I().selectedUnit,onClose:F,title:t},e.unitId)}))})]}),(0,a.jsx)("div",{className:I().pageTitle,children:(0,o.t)(o.Strings.permission_setting)}),(0,a.jsx)(E,{onChange:function(e,n){var t=(0,v.Z)(P);n&&!t.includes(e)&&t.push(e),!n&&t.includes(e)&&(t=t.filter((function(n){return n!==e}))),Z(t)},defaultChecked:P,checked:P,inRead:l===i.Read}),l!==i.Read&&(0,a.jsxs)("div",{className:I().btnWrapper,children:[(0,a.jsx)(r.TextButton,{onClick:R,size:"small",children:(0,o.t)(o.Strings.cancel)}),(0,a.jsx)(r.Button,{onClick:function(){if(l===i.Add){var e=T.map((function(e){return e.memberId}));if((0,j.triggerUsageAlert)("maxAdminNums",{usage:e.length+c,alwaysAlert:!0},j.SubscribeUsageTipType.Alert))return;return U(!0),void G(e,P,R)}if(l===i.Edit)return U(!0),void(null===H||void 0===H||H(!0));R()},color:"primary",className:I().confirmBtn,disabled:0===P.length||0===T.length&&l===i.Add||L,size:"small",loading:L,children:(0,o.t)(o.Strings.submit)})]})]}),N&&(0,a.jsx)(b.Gh,{source:b.AU.Admin,onSubmit:function(e){W(e)},onCancel:function(){C(!1)},checkedList:T,disableIdList:function(){if(u.length>0){var e=u.map((function(e){return e.memberId}));return e.push(_.memberId),e}return[_.memberId]}()})]})},W=t(479654),w=t.n(W),P=["MANAGE_NORMAL_MEMBER"],Z={action:["hover"],popupAlign:{points:["tl","bl"],offset:[0,18],overflow:{adjustX:!0,adjustY:!0}}},B=function(){var e=(0,r.useThemeColors)(),n=(0,u.T)(),t=(0,s.useRef)(null),g=(0,f.useSelector)((function(e){var n;return{subAdminList:e.spacePermissionManage.subAdminListData?e.spacePermissionManage.subAdminListData.records:[],subAdminListData:e.spacePermissionManage.subAdminListData,user:e.user.info,subscription:null===(n=e.billing)||void 0===n?void 0:n.subscription,spaceInfo:e.space.curSpaceInfo}}),f.shallowEqual),v=g.subAdminList,b=g.subAdminListData,h=g.user,y=g.subscription,S=g.spaceInfo,x=(0,s.useState)(null),N=x[0],C=x[1],k=(0,s.useState)(null),E=k[0],A=k[1],I=(0,s.useState)(1),M=I[0],W=I[1],B=(0,s.useState)(0),L=B[0],U=B[1],D=(0,m.gC)({fromUserId:h.uuid,spaceId:h.spaceId}).delSubAdminAndNotice,O=y?Math.max(y.maxAdminNums-1,0):0;(0,c.Z)((function(){o.Player.doTrigger(o.Events.space_setting_sub_admin_shown)})),(0,s.useEffect)((function(){n(o.StoreActions.getSubAdminList(M))}),[n,M]);var z=(0,s.useCallback)((function(){if(t.current){var e=t.current.clientHeight-45;U(e)}}),[t]);(0,s.useLayoutEffect)((function(){z()}),[z]),(0,s.useEffect)((function(){return window.addEventListener("resize",z),function(){window.removeEventListener("resize",z)}}),[z]);var R=[{title:(0,o.t)(o.Strings.member_family_name),dataIndex:"memberName",key:"memberName",render:function(e,n){var t=(null===j.getSocialWecomUnitName||void 0===j.getSocialWecomUnitName?void 0:(0,j.getSocialWecomUnitName)({name:null===n||void 0===n?void 0:n.memberName,isModified:null===n||void 0===n?void 0:n.isMemberNameModified,spaceInfo:S}))||(null===n||void 0===n?void 0:n.memberName);return(0,a.jsx)(d.rJ,{title:t||n.memberName||(0,o.t)(o.Strings.unnamed),description:n.team,triggerBase:Z,memberId:n.memberId,avatarProps:{id:n.memberId,title:n.memberName||(0,o.t)(o.Strings.unnamed),src:n.avatar}},n.id)},align:"left"},{title:(0,o.t)(o.Strings.permission_bound),dataIndex:"resourceGroupCodes",key:"resourceGroupCodes",render:function(e){return e.filter((function(e){return!P.includes(e)})).map((function(e){return(0,o.t)(o.Strings["role_permission_".concat(e.toLowerCase())])})).join(" & ")},ellipsis:!0,align:"left"},{title:(0,o.t)(o.Strings.operate),dataIndex:"operate",key:"operate",align:"left",render:function(e,n){return(0,a.jsxs)("div",{className:w().operateBtn,children:[(0,a.jsx)(r.TextButton,{color:"primary",onClick:function(){return function(e){C(i.Edit),A(e)}(n)},size:"small",children:(0,o.t)(o.Strings.edit)}),(0,a.jsx)("span",{children:"|"}),(0,a.jsx)(r.TextButton,{color:"danger",onClick:function(){return function(e){var n,t=(null===j.getSocialWecomUnitName||void 0===j.getSocialWecomUnitName?void 0:(0,j.getSocialWecomUnitName)({name:e.memberName,isModified:e.isMemberNameModified,spaceInfo:S}))||e.memberName;if("string"===typeof t)n=(0,o.t)(o.Strings.space_manage_confirm_del_sub_admin_content,{memberName:e.memberName});else{var i=(0,o.t)(o.Strings.space_manage_confirm_del_sub_admin_content,{memberName:p.renderToStaticMarkup(t)});n=(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})}d.u_.confirm({title:(0,o.t)(o.Strings.space_manage_confirm_del_sub_admin_title),content:n,onOk:function(){D(e.memberId)},type:"danger"})}(n)},size:"small",children:(0,o.t)(o.Strings.delete)})]})}}];return(0,_.Sy)().SPACE_SUB_ADMIN_VISIBLE?(0,a.jsxs)("div",{className:w().subAdmin,children:[(0,a.jsx)(r.Typography,{variant:"h6",children:(0,o.t)(o.Strings.sub_admin)}),(0,a.jsx)(r.Typography,{variant:"body4",color:e.thirdLevelText,className:w().describe,children:(0,o.t)(o.Strings.space_admin_info,{count:O})}),(0,a.jsx)("div",{children:(0,a.jsx)(r.Button,{onClick:function(){(null===j.triggerUsageAlert||void 0===j.triggerUsageAlert?void 0:(0,j.triggerUsageAlert)("maxAdminNums",{usage:v.length,alwaysAlert:!0},null===j.SubscribeUsageTipType||void 0===j.SubscribeUsageTipType?void 0:j.SubscribeUsageTipType.Alert))||C(i.Add)},variant:"jelly",children:(0,o.t)(o.Strings.add_sub_admin)})}),(0,a.jsx)("div",{className:w().tableWrapper,ref:t,children:(0,a.jsx)(l.Z,{columns:R,dataSource:v,pagination:!1,rowKey:function(e){return e.memberId},scroll:{y:L}})}),b&&b.total>o.ConfigConstant.SUB_ADMIN_LIST_PAGE_SIZE&&(0,a.jsx)("div",{className:w().pagination,children:(0,a.jsx)(r.Pagination,{current:M,total:b?b.total:0,onChange:function(e){return W(e)},pageSize:o.ConfigConstant.SUB_ADMIN_LIST_PAGE_SIZE})}),N&&(0,a.jsx)(T,{cancelModal:function(){C(null),A(null)},source:N,editOrReadSubMainInfo:E,existSubAdminNum:v.length})]}):(0,a.jsx)(a.Fragment,{})},L=t(547479),U=t.n(L),D=function(){var e=(0,r.useThemeColors)(),n=(0,f.useSelector)((function(e){return e.spacePermissionManage.mainAdminInfo})),t=(0,f.useSelector)((function(e){return e.space.curSpaceInfo})),i=n||{},s=i.name,o=void 0===s?"-":s,c=i.email,l=void 0===c?"-":c,m=i.isMemberNameModified,u=i.avatarColor,_=i.nickName,p=(null===j.getSocialWecomUnitName||void 0===j.getSocialWecomUnitName?void 0:(0,j.getSocialWecomUnitName)({name:o,isModified:m,spaceInfo:t}))||o;return(0,a.jsxs)("div",{className:U().adminInfoWrapper,children:[n&&(0,a.jsx)(d.qE,{title:_||o,src:n.avatar,avatarColor:u,size:d.DZ.Size40,className:U().portrait,id:n.name}),(0,a.jsxs)("div",{className:U().infoRight,children:[(0,a.jsx)(r.Typography,{variant:"h6",ellipsis:{rows:2},color:"-"===o?e.fourthLevelText:e.firstLevelText,children:p}),(0,a.jsx)(r.Typography,{variant:"body4",color:"-"===l?e.fourthLevelText:e.thirdLevelText,children:l})]})]})},O=t(347842),z=t(60791),R=t(855633),G=t(910462),H=t(996201),F=t(72779),V=t.n(F),K=t(133028),Q=t(256666),X=t(459740),J=t(709249),Y=t(887371),q=t(545754),$=t(30017),ee=t(608956),ne=["className","prefixCls","style","active","status","iconPrefix","icon","wrapperStyle","stepNumber","disabled","description","title","subTitle","progressDot","stepIcon","tailContent","icons","stepIndex","onStepClick","onClick"];function te(e){return"string"===typeof e}var ie=function(e){(0,q.Z)(t,e);var n=(0,$.Z)(t);function t(){var e;return(0,J.Z)(this,t),(e=n.apply(this,arguments)).onClick=function(){var n=e.props,t=n.onClick,i=n.onStepClick,a=n.stepIndex;t&&t.apply(void 0,arguments),i(a)},e}return(0,Y.Z)(t,[{key:"renderIconNode",value:function(){var e,n,t=this.props,i=t.prefixCls,a=t.progressDot,r=t.stepIcon,o=t.stepNumber,c=t.status,l=t.title,d=t.description,m=t.icon,u=t.iconPrefix,_=t.icons,p=V()("".concat(i,"-icon"),"".concat(u,"icon"),(e={},(0,Q.Z)(e,"".concat(u,"icon-").concat(m),m&&te(m)),(0,Q.Z)(e,"".concat(u,"icon-check"),!m&&"finish"===c&&(_&&!_.finish||!_)),(0,Q.Z)(e,"".concat(u,"icon-cross"),!m&&"error"===c&&(_&&!_.error||!_)),e)),f=s.createElement("span",{className:"".concat(i,"-icon-dot")});return n=a?"function"===typeof a?s.createElement("span",{className:"".concat(i,"-icon")},a(f,{index:o-1,status:c,title:l,description:d})):s.createElement("span",{className:"".concat(i,"-icon")},f):m&&!te(m)?s.createElement("span",{className:"".concat(i,"-icon")},m):_&&_.finish&&"finish"===c?s.createElement("span",{className:"".concat(i,"-icon")},_.finish):_&&_.error&&"error"===c?s.createElement("span",{className:"".concat(i,"-icon")},_.error):m||"finish"===c||"error"===c?s.createElement("span",{className:p}):s.createElement("span",{className:"".concat(i,"-icon")},o),r&&(n=r({index:o-1,status:c,title:l,description:d,node:n})),n}},{key:"render",value:function(){var e,n=this.props,t=n.className,i=n.prefixCls,a=n.style,r=n.active,o=n.status,c=void 0===o?"wait":o,l=(n.iconPrefix,n.icon),d=(n.wrapperStyle,n.stepNumber,n.disabled),m=n.description,u=n.title,_=n.subTitle,p=(n.progressDot,n.stepIcon,n.tailContent),f=(n.icons,n.stepIndex,n.onStepClick),g=n.onClick,v=(0,X.Z)(n,ne),b=V()("".concat(i,"-item"),"".concat(i,"-item-").concat(c),t,(e={},(0,Q.Z)(e,"".concat(i,"-item-custom"),l),(0,Q.Z)(e,"".concat(i,"-item-active"),r),(0,Q.Z)(e,"".concat(i,"-item-disabled"),!0===d),e)),h=(0,K.Z)({},a),y={};return f&&!d&&(y.role="button",y.tabIndex=0,y.onClick=this.onClick),s.createElement("div",Object.assign({},v,{className:b,style:h}),s.createElement("div",Object.assign({onClick:g},y,{className:"".concat(i,"-item-container")}),s.createElement("div",{className:"".concat(i,"-item-tail")},p),s.createElement("div",{className:"".concat(i,"-item-icon")},this.renderIconNode()),s.createElement("div",{className:"".concat(i,"-item-content")},s.createElement("div",{className:"".concat(i,"-item-title")},u,_&&s.createElement("div",{title:"string"===typeof _?_:void 0,className:"".concat(i,"-item-subtitle")},_)),m&&s.createElement("div",{className:"".concat(i,"-item-description")},m))))}}]),t}(s.Component),ae=["prefixCls","style","className","children","direction","type","labelPlacement","iconPrefix","status","size","current","progressDot","stepIcon","initial","icons","onChange"],se=function(e){(0,q.Z)(t,e);var n=(0,$.Z)(t);function t(){var e;return(0,J.Z)(this,t),(e=n.apply(this,arguments)).onStepClick=function(n){var t=e.props,i=t.onChange,a=t.current;i&&a!==n&&i(n)},e}return(0,Y.Z)(t,[{key:"render",value:function(){var e,n=this,t=this.props,i=t.prefixCls,a=t.style,r=void 0===a?{}:a,o=t.className,c=t.children,l=t.direction,d=t.type,m=t.labelPlacement,u=t.iconPrefix,_=t.status,p=t.size,f=t.current,g=t.progressDot,v=t.stepIcon,b=t.initial,h=t.icons,y=t.onChange,S=(0,X.Z)(t,ae),x="navigation"===d,N=g?"vertical":m,C=V()(i,"".concat(i,"-").concat(l),o,(e={},(0,Q.Z)(e,"".concat(i,"-").concat(p),p),(0,Q.Z)(e,"".concat(i,"-label-").concat(N),"horizontal"===l),(0,Q.Z)(e,"".concat(i,"-dot"),!!g),(0,Q.Z)(e,"".concat(i,"-navigation"),x),e));return s.createElement("div",Object.assign({className:C,style:r},S),(0,ee.Z)(c).map((function(e,t){var a=b+t,o=(0,K.Z)({stepNumber:"".concat(a+1),stepIndex:a,key:a,prefixCls:i,iconPrefix:u,wrapperStyle:r,progressDot:g,stepIcon:v,icons:h,onStepClick:y&&n.onStepClick},e.props);return"error"===_&&t===f-1&&(o.className="".concat(i,"-next-error")),e.props.status||(o.status=a===f?_:a<f?"finish":"wait"),o.active=a===f,(0,s.cloneElement)(e,o)})))}}]),t}(s.Component);se.Step=ie,se.defaultProps={type:"default",prefixCls:"rc-steps",iconPrefix:"rc",direction:"horizontal",labelPlacement:"horizontal",initial:0,current:0,status:"process",size:"",progressDot:!1};var re=se,oe=t(91878),ce=t(726026),le=t(781653),de=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)n.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(t[i[a]]=e[i[a]])}return t},me=function(e){var n,t=e.percent,i=e.size,a=e.className,r=e.direction,o=e.responsive,c=void 0===o||o,l=e.current,d=void 0===l?0:l,m=de(e,["percent","size","className","direction","responsive","current"]),u=(0,ce.Z)(c).xs,_=s.useContext(oe.E_),p=_.getPrefixCls,f=_.direction,g=s.useCallback((function(){return c&&u?"vertical":r}),[u,r]),v=p("steps",e.prefixCls),b=p("",e.iconPrefix),h=V()((n={},(0,R.Z)(n,"".concat(v,"-rtl"),"rtl"===f),(0,R.Z)(n,"".concat(v,"-with-progress"),void 0!==t),n),a),y={finish:s.createElement(G.Z,{className:"".concat(v,"-finish-icon")}),error:s.createElement(H.Z,{className:"".concat(v,"-error-icon")})};return s.createElement(re,(0,z.Z)({icons:y},m,{current:d,size:i,direction:g(),stepIcon:function(e){var n=e.node;if("process"===e.status&&void 0!==t){var a="small"===i?32:40;return s.createElement("div",{className:"".concat(v,"-progress-icon")},s.createElement(le.Z,{type:"circle",percent:t,width:a,strokeWidth:4,format:function(){return null}}),n)}return n},prefixCls:v,iconPrefix:b,className:h}))};me.Step=re.Step;var ue=me,_e=t(773941),pe=t(616652),fe=t(320413),ge=t.n(fe),ve=function(e){var n=(0,f.useSelector)((function(e){return e.user.info})),t=(0,s.useState)(""),i=t[0],c=t[1],l=(0,s.useState)([]),m=l[0],u=l[1],_=(0,s.useState)(null),p=_[0],g=_[1],v=(0,s.useState)(!1),b=v[0],h=v[1];(0,s.useEffect)((function(){i&&o.Api.searchMember(i,!0).then((function(e){var t=e.data,i=t.success,a=t.data;i&&u(a.filter((function(e){return e.memberId!==n.memberId})))}))}),[i,n]);return(0,a.jsx)("div",{className:ge().selectAdmin,children:(0,a.jsxs)(pe.Z,{children:[(0,a.jsxs)("div",{className:ge().label,children:[(0,o.t)(o.Strings.primary_admin_new_nickname),"\uff1a"]}),(0,a.jsx)(d.vK,{onChange:function(e){c(e),g(null)},initInputText:"",searchResult:m,onClick:function(e){g(e)},placehodler:(0,o.t)(o.Strings.search_new_admin)}),p&&(0,a.jsxs)("div",{className:ge().selectedInfo,children:[p.mobile&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:ge().label,children:[(0,o.t)(o.Strings.primary_admin_new_phone),"\uff1a"]}),(0,a.jsx)(r.TextInput,{value:(0,o.hiddenMobile)(p.mobile),disabled:!0,block:!0})]}),(0,a.jsxs)("div",{className:ge().label,children:[(0,o.t)(o.Strings.handed_over_workspace),"\uff1a"]}),(0,a.jsx)(r.TextInput,{value:p.team,disabled:!0,block:!0})]}),(0,a.jsxs)("div",{className:ge().btnWrapper,children:[(0,a.jsx)(r.LinkButton,{className:ge().prevBtn,onClick:function(){return e.setCurrent(0)},underline:!1,component:"button",children:(0,o.t)(o.Strings.last_step)}),(0,a.jsx)(r.Button,{className:ge().confirmBtn,disabled:!p||b,onClick:function(){h(!0),p&&o.Api.changeMainAdmin(p.memberId).then((function(n){var t=n.data,i=t.success,a=t.message;h(!1),i?e.setCurrent(2):d.v0.error({content:a})}))},loading:b,color:"primary",size:"large",children:(0,o.t)(o.Strings.chose_new_primary_admin_button)})]})]})})},be=t(895869),he=t.n(be),ye=t(501527),Se=function(e){var n=(0,s.useState)(""),t=n[0],i=n[1],c=(0,f.useSelector)((function(e){return e.spacePermissionManage.mainAdminInfo})),l=(0,f.useSelector)((function(e){return e.space.curSpaceInfo})),u=(0,g.Z)((0,m.vA)({accountErrMsg:"",identifyingCodeErrMsg:""}),2),_=u[0],p=u[1],v=(0,m.QT)((function(e,n,t,i){return n?o.Api.smsVerify(e,n,i):o.Api.emailCodeVerify(t,i)}),{manual:!0,onSuccess:function(n){var t=n.data,i=t.success,a=t.message;i?e.setCurrent(1):p({identifyingCodeErrMsg:a})}}),b=v.run,h=v.loading,y=s.useCallback((function(e){_.identifyingCodeErrMsg&&p({identifyingCodeErrMsg:""});var n=e.target.value.trim();i(n)}),[p,_.identifyingCodeErrMsg]),S=s.useMemo((function(){return Boolean((null===c||void 0===c?void 0:c.mobile)||(null===c||void 0===c?void 0:c.email))}),[c]),x=s.useMemo((function(){if(!S||!c)return null;var e=(0,ye.PE)({key:ye.HY.CHANGE_MAIN_ADMIN}),n=e.codeMode,t=e.inputText,i=e.verifyAccount,s=e.smsType,l=e.emailType,m=e.areaCode;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:V()(he().label,he().top),children:c.mobile?(0,o.t)(o.Strings.primary_admin_phone):(0,o.t)(o.Strings.primary_admin_email)}),(0,a.jsx)(r.TextInput,{value:t,disabled:!0,block:!0}),(0,a.jsx)("div",{className:V()(he().label,he().top),children:(0,o.t)(o.Strings.verification_code)}),(0,a.jsx)(d.k6,{tip:_.identifyingCodeErrMsg,captchaVisible:!0,children:(0,a.jsx)(d.DH,{data:{account:i,areaCode:m},smsType:s,onChange:y,setErrMsg:p,emailType:l,mode:n,error:Boolean(_.identifyingCodeErrMsg),disabled:Boolean(_.accountErrMsg||_.identifyingCodeErrMsg)})})]})}),[c,S,_.accountErrMsg,p,_.identifyingCodeErrMsg,y]),N=s.useMemo((function(){return!(!c||!c.mobile)&&(h||!t)}),[h,t,c]),C=(null===j.getSocialWecomUnitName||void 0===j.getSocialWecomUnitName?void 0:(0,j.getSocialWecomUnitName)({name:null===c||void 0===c?void 0:c.name,isModified:null===c||void 0===c?void 0:c.isMemberNameModified,spaceInfo:l}))||(null===c||void 0===c?void 0:c.name);return(0,a.jsx)("div",{style:{width:"306px"},children:(0,a.jsxs)(pe.Z,{children:[(0,a.jsx)("div",{className:he().label,children:(0,o.t)(o.Strings.primary_admin_nickname)}),"string"===typeof C?(0,a.jsx)(r.TextInput,{value:c?c.name:"",disabled:!0,block:!0}):(0,a.jsx)("div",{className:he().name,children:C}),x,(0,a.jsx)(r.Button,{color:"primary",onClick:function(){S&&c?b(c.areaCode,c.mobile,c.email,t):e.setCurrent(1)},style:{marginTop:"30px"},block:!0,size:"large",loading:h,disabled:N,children:(0,o.t)(o.Strings.next_step)})]})})},xe=t(327553),Ne=t.n(xe),Ce=ue.Step,je=function(e){var n=e.cancelModal,t=(0,s.useState)(0),i=t[0],c=t[1],l=(0,f.useSelector)((function(e){return e.user.info}));(0,s.useEffect)((function(){l&&(l.isAdmin||_e.F.push(o.Navigation.HOME))}),[l]);var d=function(){2===i?_e.F.redirect(o.Navigation.HOME):n()},m=[{title:(0,o.t)(o.Strings.space_manage_verify_primary_admin),content:(0,a.jsx)(Se,{setCurrent:c})},{title:(0,o.t)(o.Strings.space_manage_choose_new_primary_admin),content:(0,a.jsx)(ve,{setCurrent:c})},{title:(0,o.t)(o.Strings.finish),content:(0,a.jsxs)("div",{className:Ne().successStep,children:[(0,a.jsx)(k.CheckCircleFilled,{className:Ne().successIcon}),(0,a.jsx)("div",{className:Ne().successText,children:(0,o.t)(o.Strings.change_primary_admin_succeed)}),(0,a.jsx)(r.Button,{style:{marginTop:"30px"},htmlType:"submit",onClick:d,size:"large",block:!0,color:"primary",children:(0,o.t)(o.Strings.back_to_workbench)}),(0,a.jsx)("span",{className:Ne().informationText,children:(0,o.t)(o.Strings.space_manage_infomation_text)})]})}];return(0,a.jsxs)(y.Modal,{footer:null,visible:!0,className:Ne().superAdminModal,centered:!0,width:"80%",style:{maxWidth:"1170px",minWidth:"530px"},maskClosable:!0,onCancel:d,children:[(0,a.jsx)(r.Typography,{variant:"h6",children:(0,o.t)(o.Strings.change_primary_admin)}),(0,a.jsxs)("div",{className:Ne().stepWrapper,children:[(0,a.jsx)(ue,{current:i,labelPlacement:"vertical",progressDot:function(e,n){var t,i=n.status,s=n.index;return(0,a.jsx)("span",{className:V()((t={},(0,O.Z)(t,Ne().finish,"finish"===i),(0,O.Z)(t,Ne().process,"process"===i),(0,O.Z)(t,Ne().wait,"wait"===i),t)),children:s+1})},children:m.map((function(e){return(0,a.jsx)(Ce,{title:e.title},e.title)}))}),m.map((function(e,n){return(0,a.jsx)("div",{style:{display:i===n?"block":"none"},children:e.content},e.title)}))]})]})},ke=t(722913),Ee=t.n(ke),Ae=function(){var e=(0,r.useThemeColors)(),n=(0,u.T)(),t=(0,f.useSelector)((function(e){return e.spacePermissionManage.spaceResource})),i=(0,f.useSelector)((function(e){return e.space.curSpaceInfo})),l=(0,s.useState)(!1),d=l[0],m=l[1];(0,c.Z)((function(){o.Player.doTrigger(o.Events.space_setting_main_admin_shown)})),(0,s.useEffect)((function(){n(o.StoreActions.getMainAdminInfo())}),[n]);var p=(0,s.useMemo)((function(){return i&&t&&t.mainAdmin&&(0,_.Sy)().CHANGE_SPACE_ADMIN_VISIBLE?(0,a.jsx)(r.Button,{color:"primary",onClick:function(){return m(!0)},children:(0,o.t)(o.Strings.change_primary_admin)}):null}),[t,i]);return(0,a.jsxs)("div",{className:Ee().superAdmin,children:[(0,a.jsx)(r.Typography,{variant:"h6",children:(0,o.t)(o.Strings.primary_admin)}),(0,a.jsx)(r.Typography,{variant:"body4",color:e.thirdLevelText,children:(0,o.t)(o.Strings.main_admin_page_desc)}),(0,a.jsxs)("div",{className:Ee().card,children:[(0,a.jsx)(D,{}),p]}),d&&(0,a.jsx)(je,{cancelModal:function(){return m(!1)}})]})},Ie=t(177353),Me=t.n(Ie),Te=function(){return(0,a.jsxs)("div",{className:Me().managerContainer,children:[(0,a.jsx)(r.Typography,{variant:"h1",children:(0,o.t)(o.Strings.share_permisson_model_space_admin)}),(0,a.jsx)(r.Typography,{className:Me().pageSubscribe,variant:"body2",children:(0,o.t)(o.Strings.share_permisson_model_space_admin_tip)}),(0,a.jsx)(Ae,{}),(0,a.jsx)(B,{})]})},We=Te},547479:function(e){e.exports={adminInfoWrapper:"style_adminInfoWrapper__f8Gfg",portrait:"style_portrait__Qb_wP",infoRight:"style_infoRight__6NPjW"}},327553:function(e){e.exports={antModalClose:"style_ant-modal-close__Nnus4",antModalCloseX:"style_ant-modal-close-x__ikECZ",antModalBody:"style_ant-modal-body__NRYeP",antModalConfirmTitle:"style_ant-modal-confirm-title__f57Lx",antModalConfirmContent:"style_ant-modal-confirm-content___jpvq",antModalHeader:"style_ant-modal-header__jBx7S",antModalTitle:"style_ant-modal-title__Zvk4v",antModalContent:"style_ant-modal-content__lIFNp",antModalFooter:"style_ant-modal-footer__aM6lp",superAdminModal:"style_superAdminModal__b0_uJ",informationText:"style_informationText___SiSV",finish:"style_finish__EfVaa",process:"style_process__Yv_sl",wait:"style_wait__jPUqU",notProcess:"style_notProcess__LrA1f",successStep:"style_successStep__wN_Fc",successText:"style_successText__6xQ0V",successIcon:"style_successIcon__dww89",stepWrapper:"style_stepWrapper__XKNc1"}},320413:function(e){e.exports={selectAdmin:"style_selectAdmin__JKBcU",selectedInfo:"style_selectedInfo__8kfNB",btnWrapper:"style_btnWrapper__gHcAX",prevBtn:"style_prevBtn__ia6Pu",confirmBtn:"style_confirmBtn__AbASP",label:"style_label__A5PtO"}},722913:function(e){e.exports={antiEllipsis:"style_antiEllipsis__mKKAX",noSelect:"style_noSelect__DTbsK",antSelectOptionCommon:"style_ant-select-option-common__J8pz1",flexCenter:"style_flexCenter__hNlp0",inputErrorMsg:"style_inputErrorMsg__HmijU",tree:"style_tree__mnr6g",lightTree:"style_lightTree__2SOT5",darkTree:"style_darkTree__MztK2",superAdmin:"style_superAdmin__TGRGB",scrollWrapper:"style_scrollWrapper__9tVdV",adminInfo:"style_adminInfo__wLdQQ",card:"style_card__hvviw"}},895869:function(e){e.exports={label:"style_label__m7Hc3",top:"style_top__fWk9A",name:"style_name__0dwLo"}},177353:function(e){e.exports={antiEllipsis:"style_antiEllipsis__7PrCz",noSelect:"style_noSelect__2pO24",antSelectOptionCommon:"style_ant-select-option-common__ED73_",flexCenter:"style_flexCenter__oxsLQ",inputErrorMsg:"style_inputErrorMsg___jLBn",tree:"style_tree__2SoUo",lightTree:"style_lightTree__ai7Q6",darkTree:"style_darkTree__l_9m8",managerContainer:"style_managerContainer__Qm4_M",pageSubscribe:"style_pageSubscribe__xh6Gm"}},944958:function(e){e.exports={addAdminModal:"style_addAdminModal__SAUEi",pageTitle:"style_pageTitle__k6Ruh",addBtnIcon:"style_addBtnIcon__5dr1_",selectedWrapper:"style_selectedWrapper__eSxnH",selectedUnit:"style_selectedUnit__j5Ndr",cardWrap:"style_cardWrap__XnejP",btnWrapper:"style_btnWrapper__BDmYI",confirmBtn:"style_confirmBtn__EnmQ4"}},876566:function(e){e.exports={permissionCard:"style_permissionCard__ZDJ30",title:"style_title__H8D1H",checkboxWrap:"style_checkboxWrap__REUj_",checkboxItem:"style_checkboxItem___JHeU"}},479654:function(e){e.exports={antiEllipsis:"style_antiEllipsis__gxFVy",noSelect:"style_noSelect__U1CuZ",antSelectOptionCommon:"style_ant-select-option-common__HU2bw",flexCenter:"style_flexCenter__7_pA_",inputErrorMsg:"style_inputErrorMsg__29CLg",tree:"style_tree__KmK8p",lightTree:"style_lightTree__zCX4M",darkTree:"style_darkTree__xIGz4",subAdmin:"style_subAdmin__4WO4W",describe:"style_describe__XSELD",gradeInfo:"style_gradeInfo__Ikltj",addAdminBtn:"style_addAdminBtn__ZNbSV",tableWrapper:"style_tableWrapper__o1Men",pagination:"style_pagination__h1fwO",groupName:"style_groupName__QLatk",operateBtn:"style_operateBtn___BLsv"}}}]);