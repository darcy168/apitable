(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4175,2845],{386303:function(e,t,n){"use strict";n.d(t,{M:function(){return y}});var r=n(552322),i=n(323440),s=n(205632),a=n(351253),o=n(996577),l=n.n(o),c=n(223258),d=n(773941),u=n(516026),m=n(38050),p=n.n(m),_=function(){var e=(0,a.useThemeMode)();return(0,r.jsxs)("div",{className:p().noAccess,children:[(0,r.jsx)("div",{className:p().logo,children:(0,r.jsx)(c.TR,{size:"large",theme:e})}),(0,r.jsx)("div",{className:p().noAccessImage,children:(0,r.jsx)(l(),{src:u.Z,alt:(0,i.t)(i.Strings.system_configuration_product_name)})}),(0,r.jsx)("h1",{children:(0,i.t)(i.Strings.space_not_access)}),(0,r.jsx)(a.Button,{color:"primary",onClick:function(){d.F.redirect(i.Navigation.HOME)},children:(0,i.t)(i.Strings.back_to_space)})]})},g=n(864453),h=n(982008),v=n(585421),f=n(202784),S=n(829051),x=n(834406),y=function(e){var t=e.children,n=(0,S.useSelector)((function(e){return i.Selectors.userStateSelector(e)}),S.shallowEqual),a=(0,S.useDispatch)(),o=(0,S.useSelector)((function(e){return e.space.activeId})),l=(0,g.QT)(i.Api.getLabsFeature,{manual:!0}).run,c=(0,s.useRouter)();if((0,g.N6)(),(0,f.useEffect)((function(){o&&l(o).then((function(e){var t,n,r;a(i.StoreActions.setLabs(null!==(r=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.keys)&&void 0!==r?r:[]))}))}),[a,l,o]),(0,f.useEffect)((function(){if(n.info){var e=n.info;e.isPaused&&d.F.push(i.Navigation.APPLY_LOGOUT),e.needCreate?d.F.push(i.Navigation.CREATE_SPACE):!e.isDelSpace||c.asPath.includes("/management")||d.F.push(i.Navigation.SPACE_MANAGE,{params:{spaceId:n.info.spaceId}})}}),[n.info,n.userInfoErr]),n.userInfoErr&&n.userInfoErr.code===i.StatusCode.MOVE_FORM_SPACE)return h.Zc.instance.destroy(),(0,r.jsx)(_,{});return n&&n.isLogin?n.info&&o?(0,r.jsx)(r.Fragment,{children:t}):null:(0,r.jsx)(r.Fragment,{children:function(){var e=(0,v.Sy)().LOGIN_ON_AUTHORIZATION_REDIRECT_TO_URL;if(e)return location.href=e+encodeURIComponent(location.href),null;var t=(x.env.SSR?{href:""}:location).href;return x.env.SSR||c.asPath.includes("login")||d.F.redirect(i.Navigation.LOGIN,{query:{reference:t}}),null}()})}},304175:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return je}});var r=n(552322),i=n(386303),s=n(667826),a=n(798788),o=n(347842),l=n(745680),c=n(351253),d=n(323440),u=n(165846),m=n(5693),p=n(72779),_=n.n(p),g=n(914463),h=n(37680),v=n(2302),f=n(638466),S=n(205632),x=n(859319),y=n(578033),A=n(773941),T=n(445771),j=n(202784),b=n(829051),N=n(353512),I=n(332085),w=n(162285),C=n(997929),E=n(743463),k=n(276635),U=n(996577),P=n.n(U),M=n(208155),R=n(862183),L=n(322907),O=n(451331),B=n(864453),W=n(585421),V={src:"/_next/static/media/workbench_empty_light.cbccc0dc.png",height:600,width:800,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAS1BMVEVMaXHKw+i9tOx0WLi9terv7PzMxfP5+fteS9vTyu/h3Pvc1/ru6/318/uehOOYg9GmmfH49v3AuevSzfGMe+vX0/2EfNPTzvXU0fRYlJP1AAAAF3RSTlMA/DJA9h0+/hASv8b47vZux+3a473+CdQGXsYAAAAJcEhZcwAACxMAAAsTAQCanBgAAAA4SURBVAiZFcGJEYAgDATAAxIuURTlGey/UoddYEsJsPGch4jCwlryzYhIMpCK3Pp1vyUDZl5d/QclPwGSBXLATwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6},F={src:"/_next/static/media/workbench_empty_dark.ac157884.png",height:600,width:800,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAMAAADJ2y/JAAAAUVBMVEVMaXFGRkdyYK98dqM3Nzq5s95ZSINDPm9bS7REREGTgvLUzvR4asVXUXlNSWl5YbpXPZxhVpGblrjKw/OvqctlYIr9/P+QirOakcmurq9NTk5UQQPRAAAAFXRSTlMA/Dv48TNBCxMdu/vGxb9e+e/g1fxqQmrUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAOElEQVQImRXBhxHAIAwAsQcMtkkvkLL/oLlI8IsFrI7TnDbHhqvdqUVyf8L5ipOPXVYJBVRtUdcPLC4BxeVf0iUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:6},D=n(223258),G=n(736367),Z=function(e){var t=e.setShow,n=(0,j.useState)(""),i=n[0],s=n[1],a=(0,G.T)(),o=(0,b.useSelector)((function(e){return e.space.activeId})),l=(0,j.useState)(""),c=l[0],u=l[1],m=(0,B.QT)((function(e,t,n,r,i){return d.Api.addNode({parentId:e,type:t,nodeName:n,preNodeId:r,extra:i}).then((function(e){var n=e.data,r=n.data,i=n.message;n.success?(a(d.StoreActions.addNode(r)),a(d.StoreActions.setEditNodeId("")),t===d.ConfigConstant.NodeType.DATASHEET&&A.F.push(d.Navigation.WORKBENCH,{params:{spaceId:o,nodeId:r.nodeId}})):u(i)}))}),{manual:!0}),p=m.run,_=(0,b.useSelector)((function(e){return{parentId:e.catalogTree.rootId}}),b.shallowEqual).parentId;return(0,r.jsx)(D.oM,{title:(0,d.t)(d.Strings.new_datasheet),onCancel:function(){t(!1)},onOk:function(){c||p(_,d.ConfigConstant.NodeType.DATASHEET,i,void 0,{viewName:(0,d.t)(d.Strings.default_view)})},okText:(0,d.t)(d.Strings.submit),cancelText:(0,d.t)(d.Strings.cancel),centered:!0,visible:!0,children:(0,r.jsx)(D.ge,{placeholder:(0,d.t)(d.Strings.placeholder_input_datasheet_name),value:i,onChange:function(e){var t=e.target.value;c&&u(""),s(t),0===t.length&&u((0,d.t)(d.Strings.name_length_err))},error:Boolean(c),helperText:c,block:!0})})},z=n(328498),H=n.n(z),K=function(e){return e.includes("http")?e:"".concat(window.location.origin).concat(e)},Q=function(){var e=(0,c.useThemeColors)(),t=(0,j.useState)(!1),n=t[0],i=t[1],s=(0,b.useSelector)((function(e){return{treeNodesMap:e.catalogTree.treeNodesMap,rootId:e.catalogTree.rootId,user:e.user.info}}),b.shallowEqual),a=s.treeNodesMap,o=s.rootId,l=(0,b.useSelector)((function(e){return e.space.activeId})),m=(0,(0,B.Fs)().screenIsAtMost)(M._.md),p=(0,j.useState)(""),_=p[0],h=p[1],v=(0,W.Sy)(),f=(0,b.useSelector)((function(e){return e.space.curSpaceInfo})),S=f&&(null===g.isSocialPlatformEnabled||void 0===g.isSocialPlatformEnabled?void 0:(0,g.isSocialPlatformEnabled)(f,d.ConfigConstant.SocialType.DINGTALK)),x=f&&(null===g.isSocialPlatformEnabled||void 0===g.isSocialPlatformEnabled?void 0:(0,g.isSocialPlatformEnabled)(f,d.ConfigConstant.SocialType.WECOM)),y=f&&(null===g.isSocialPlatformEnabled||void 0===g.isSocialPlatformEnabled?void 0:(0,g.isSocialPlatformEnabled)(f,d.ConfigConstant.SocialType.FEISHU)),A=S?"?plm=dingtalk":x?"?plm=wecom":y?"?plm=feishu":"",T=v.WELCOME_CONFIG?Object.values(JSON.parse(v.WELCOME_CONFIG)):[],N=(0,b.useSelector)((function(e){return e.theme}))===c.ThemeName.Light?V:F;return a[o]&&l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.d,{maxWidthCompatible:M._.md,children:(0,r.jsx)(R.M,{})}),a[o].hasChildren?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.d,{minWidthCompatible:M._.md,children:(0,r.jsxs)("div",{className:H().guide,children:[(0,r.jsx)(c.Typography,{variant:"h1",color:e.fc1,children:(0,d.t)(d.Strings.welcome_title)}),(0,r.jsx)("div",{className:H().scrollWrapper,children:(0,r.jsx)("div",{className:H().container,children:(0,r.jsx)("div",{className:H().main,children:T.map((function(t,n){return(0,r.jsxs)("div",{className:H().guideItem,children:[!m&&(0,r.jsxs)("div",{className:H().titleWrapper,children:[(0,r.jsx)(c.Typography,{className:H().title,variant:"body1",color:e.fc2,children:(0,d.t)(d.Strings[t.moduleTitleKey])}),t.moreOperation&&(0,r.jsx)("div",{className:H().rightBtn,children:(0,r.jsxs)(c.TextButton,{className:H().moreTemplateBtn,onClick:function(){return(0,O.S)(K("".concat(t.moreOperation.linkUrl)))},children:[(0,r.jsx)(c.Typography,{variant:"body4",color:e.fc3,children:(0,d.t)(d.Strings[t.moreOperation.textKay])}),(0,r.jsx)(u.ChevronRightOutlined,{size:12,color:e.fc3})]})})]}),(0,r.jsx)("div",{className:H().moduleContainer,children:t.cards.map((function(t){return(0,r.jsxs)("div",{className:H().moduleItem,style:{backgroundColor:_===t.id?(0,k.get)(e,t.activeBackgroundColor):(0,k.get)(e,t.backgroundColor)},onClick:function(){t.video?(0,g.showModal)(t.video):(0,O.S)(K("".concat(t.linkUrl).concat(A)),{method:"true"===t.linkNewTab?L.n.NewTab:L.n.Push})},onMouseDown:function(){return h(t.id)},onMouseUp:function(){return h("")},onTouchStart:function(){return h(t.id)},onTouchEnd:function(){return h("")},children:[t.Video&&(0,r.jsx)("div",{className:H().videoBtn,children:(0,r.jsx)(u.PlayFilled,{size:20})}),(0,r.jsx)("span",{className:H().moduleImg,children:(0,r.jsx)(P(),{src:(0,d.integrateCdnHost)(t.img),alt:t.text,width:34,height:34})}),(0,r.jsx)(c.Typography,{variant:"body3",className:H().moduleName,color:(0,k.get)(e,t.color),children:(0,d.t)(d.Strings[t.textKey])})]},t.id)}))})]},n)}))})})})]})}),(0,r.jsx)(M.d,{maxWidthCompatible:M._.md,children:(0,r.jsx)("div",{className:H().mobileGuide,children:(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Typography,{variant:"h2",color:e.fc1,children:(0,d.t)(d.Strings.welcome_title)}),(0,r.jsx)("div",{className:H().container,children:T.map((function(t){return t.cards.map((function(t){return(0,r.jsxs)("div",{className:H().moduleItem,style:{backgroundColor:_===t.id?(0,k.get)(e,t.activeBackgroundColor):(0,k.get)(e,t.backgroundColor)},onClick:function(){t.video?(0,g.showModal)(t.video):(0,O.S)(K("".concat(t.linkUrl).concat(A)),{method:"true"===t.linkNewTab?L.n.NewTab:L.n.Push})},onTouchStart:function(){return h(t.id)},onTouchEnd:function(){return h("")},onMouseDown:function(){return h(t.id)},onMouseUp:function(){return h("")},children:[t.video&&(0,r.jsx)("div",{className:H().videoBtn,children:(0,r.jsx)(u.PlayFilled,{size:20})}),(0,r.jsx)("div",{className:H().moduleImg,children:(0,r.jsx)(P(),{src:(0,d.integrateCdnHost)(t.img),alt:t.name,width:34,height:34})}),(0,r.jsx)(c.Typography,{variant:"body3",className:H().moduleName,color:(0,k.get)(e,t.color),children:(0,d.t)(d.Strings[t.textKey])})]},t.id)}))}))})]})})})]}):(0,r.jsxs)("div",{className:H().welcome,children:[(0,r.jsxs)("div",{className:H().contentWrapper,children:[(0,r.jsx)(P(),{src:N,alt:(0,d.t)(d.Strings.welcome_interface),width:400,height:300}),a[o].permissions.childCreatable?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:H().tip,children:(0,d.t)(d.Strings.welcome_workspace_tip1)}),(0,r.jsx)(c.Button,{style:{width:200},color:"primary",size:"large",onClick:function(){return i(!0)},children:(0,d.t)(d.Strings.create)})]}):(0,r.jsx)("div",{className:H().tip,children:(0,d.t)(d.Strings.welcome_workspace_tip1)})]}),n&&(0,r.jsx)(Z,{setShow:i})]})]}):(0,r.jsx)(r.Fragment,{})},q=function(){var e=(0,b.useSelector)((function(e){return d.Selectors.getNodeId(e)})),t=(0,b.useSelector)((function(e){return e.catalogTree.activeNodeError})),n=(0,b.useSelector)((function(e){return{datasheetId:e.pageParams.datasheetId,folderId:e.pageParams.folderId,formId:e.pageParams.formId,dashboardId:e.pageParams.dashboardId,mirrorId:e.pageParams.mirrorId}}),b.shallowEqual),i=n.datasheetId,s=n.folderId,a=n.formId,o=n.dashboardId,l=n.mirrorId,c=(0,b.useSelector)((function(e){return e.catalogTree.treeNodesMap}));(0,m.Z)((function(){d.Player.doTrigger(d.Events.questionnaire_shown_after_sign),d.Player.doTrigger(d.Events.questionnaire_shown)}));var u=function(e){var t=c[e],n=[];return t&&c[t.nodeId].hasChildren&&t.children.length&&(n=t.children.map((function(e){return c[e]}))),n};return t?(0,r.jsx)(E.T,{}):a?(0,r.jsx)(C.b,{}):l?(0,r.jsx)(T.R,{}):i?(0,r.jsx)(I.X,{}):s?(0,r.jsx)(w.i,{nodeInfo:{id:e,name:c[e]?c[e].nodeName:"",icon:c[e]?c[e].icon:"",role:c[e]?c[e].role:"",nodeFavorite:c[e]&&c[e].nodeFavorite,permissions:c[e]&&c[e].permissions},childNodes:u(s)}):o?(0,r.jsx)(N.lL,{}):(0,r.jsx)(Q,{})},X=n(128680),J=n(302845),Y=n(178234),$=n(117029),ee=n(301575),te=n.n(ee),ne=n(850930),re=n(128879),ie=n.n(re),se=n(384577),ae=n(117763),oe=n(31856),le=n(404633),ce=n.n(le),de=n(941350),ue=n(896862),me=n.n(ue),pe=function(e){var t=e.children,n=e.nodeId,i=e.data,s=(0,j.useState)(!1),a=s[0],o=s[1];return(0,r.jsx)(de.Z,{overlayClassName:me().trashContextMenu,content:i.map((function(e){return(0,r.jsx)("div",{onClick:function(){o(!1),e.onClick&&e.onClick(n)},children:(0,r.jsx)(D.m_,{icon:e.icon,name:e.text})},e.text)})),trigger:"click",visible:a,arrowPointAtCenter:!1,mouseEnterDelay:0,mouseLeaveDelay:0,onVisibleChange:function(e){return o(e)},destroyTooltipOnHide:{keepParent:!1},align:{points:["tl","bl"]},children:(0,r.jsx)("div",{children:t})})},_e=function(){var e=(0,c.useThemeColors)(),t=(0,b.useSelector)((function(e){var t;return null===(t=e.user.info)||void 0===t?void 0:t.spaceName})),n=(0,b.useSelector)((function(e){return e.space.activeId})),i=(0,b.useSelector)((function(e){return e.space.curSpaceInfo})),s=(0,b.useSelector)((function(e){var t,n;return null===(t=e.billing)||void 0===t||null===(n=t.subscription)||void 0===n?void 0:n.product})),o=(0,b.useSelector)((function(e){var t,n;return(null===(t=e.billing)||void 0===t||null===(n=t.subscription)||void 0===n?void 0:n.maxRemainTrashDays)||0})),m=(0,j.useState)([]),p=m[0],h=m[1],v=(0,G.T)(),f=(0,B.QT)((function(e){return d.Api.trashRecover(e)}),{manual:!0}),S=f.loading,y=f.run,T=(0,b.useSelector)((function(e){return e.theme}))===c.ThemeName.Light?ae.Z:se.Z,N=(0,j.useState)(void 0),I=N[0],w=N[1],C=(0,j.useState)(!1),E=C[0],U=C[1],R=function(e){var t=e.data,n=t.success,r=t.data;if(n){var i=(0,k.last)(r);i&&w(i.nodeId),p.length>0&&I?h((0,ne.Z)(p).concat((0,ne.Z)(r))):h(r),0===r.length&&U(!0)}},L=(0,B.QT)((function(){return d.Api.getTrashList()}),{onSuccess:R}).loading,O=(0,B.QT)((function(){return d.Api.getTrashList({lastNodeId:I})}),{manual:!0,onSuccess:R}),V=O.loading,F=O.run,Z=function(){var e=(0,a.Z)((function(e){var t,r,s,a;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return S||((null===g.triggerUsageAlert||void 0===g.triggerUsageAlert?void 0:(0,g.triggerUsageAlert)("maxSheetNums",{usage:i.sheetNums+1,alwaysAlert:!0},null===g.SubscribeUsageTipType||void 0===g.SubscribeUsageTipType?void 0:g.SubscribeUsageTipType.Alert))||B.bs.test("/".concat(e))&&(null===g.triggerUsageAlert||void 0===g.triggerUsageAlert?void 0:(0,g.triggerUsageAlert)("maxFormViewsInSpace",{usage:i.formViewNums+1,alwaysAlert:!0},null===g.SubscribeUsageTipType||void 0===g.SubscribeUsageTipType?void 0:g.SubscribeUsageTipType.Alert))||B.hi.test("/".concat(e))&&(null===g.triggerUsageAlert||void 0===g.triggerUsageAlert?void 0:(0,g.triggerUsageAlert)("maxMirrorNums",{usage:i.mirrorNums+1,alwaysAlert:!0},null===g.SubscribeUsageTipType||void 0===g.SubscribeUsageTipType?void 0:g.SubscribeUsageTipType.Alert)))?[2]:[4,y(e)];case 1:return t=o.sent(),r=t.data,s=r.success,a=r.data,s?(v(d.StoreActions.addNodeToMap([a])),v(d.StoreActions.datasheetErrorCode(e,null)),v(d.StoreActions.getSpaceInfo(n,!0)),function(e){h(p.filter((function(t){return t.nodeId!==e})))}(e),A.F.push(d.Navigation.WORKBENCH,{params:{spaceId:n,nodeId:e}}),D.v0.success({content:(0,d.t)(d.Strings.recover_node_success)}),[2]):(D.v0.error({content:(0,d.t)(d.Strings.recover_node_fail)}),[2])}}))}));return function(t){return e.apply(this,arguments)}}(),z=[{icon:(0,r.jsx)(u.HistoryOutlined,{}),text:(0,d.t)(d.Strings.recover_node),onClick:Z}],H=function(){E?null===g.triggerUsageAlert||void 0===g.triggerUsageAlert||(0,g.triggerUsageAlert)("maxRemainTrashDays",{usage:o+1,alwaysAlert:!0},null===g.SubscribeUsageTipType||void 0===g.SubscribeUsageTipType?void 0:g.SubscribeUsageTipType.Alert):F()};return(0,r.jsx)("div",{className:ce().trashWrapper,children:(0,r.jsxs)("div",{className:ce().container,children:[(0,r.jsxs)("div",{className:ce().title,children:[(0,d.t)(d.Strings.trash),(0,r.jsx)(D.u,{title:(0,d.t)(d.Strings.form_tour_desc),trigger:"hover",placement:"right",children:(0,r.jsx)("a",{href:(0,W.Sy)().TRASH_HELP_URL,rel:"noopener noreferrer",target:"_blank",style:{cursor:"pointer",marginLeft:8,display:"inline-block",fontSize:24},children:(0,r.jsx)(u.QuestionCircleOutlined,{color:e.thirdLevelText})})})]}),(0,r.jsx)("div",{className:ce().tip,children:(0,r.jsx)(x.h,{tkey:(0,d.t)(d.Strings.trash_tip),params:{day:(0,r.jsx)("span",{className:ce().maxRemainTrashDays,children:o})}})}),(0,r.jsxs)("div",{className:ce().trashList,children:[(0,r.jsx)(M.d,{minWidthCompatible:M._.md,children:(0,r.jsxs)("div",{className:ce().listTitle,children:[(0,r.jsx)("div",{children:(0,d.t)(d.Strings.node_name)}),(0,r.jsx)("div",{children:(0,d.t)(d.Strings.remaining_time)}),(0,r.jsx)("div",{children:(0,d.t)(d.Strings.delete_person)}),(0,r.jsx)("div",{children:(0,d.t)(d.Strings.expiration_time)}),(0,r.jsx)("div",{children:(0,d.t)(d.Strings.path)}),(0,r.jsx)("div",{children:(0,d.t)(d.Strings.operation)})]})}),(null===p||void 0===p?void 0:p.length)?(0,r.jsxs)("div",{className:ce().listBody,children:[p.map((function(e){var n=e.memberName,s=e.isMemberNameModified,a=e.nodeName,o=e.nodeId,l=e.remainDay,m=e.avatar,p=e.uuid,h=e.deletedAt,v=e.delPath,f=e.nickName,S=e.avatarColor,x=(null===g.getSocialWecomUnitName||void 0===g.getSocialWecomUnitName?void 0:(0,g.getSocialWecomUnitName)({name:n,isModified:s,spaceInfo:i}))||n;return(0,r.jsxs)("div",{className:ce().trashListItem,children:[(0,r.jsx)(c.Typography,{ellipsis:!0,className:ce().nodeName,children:a}),(0,r.jsxs)("div",{className:ce().remainingTime,children:[(0,r.jsx)("div",{className:_()([ce().days,l<=3&&ce().redPrompt]),children:l<0?(0,d.t)(d.Strings.expired):l}),l>0&&(0,d.t)(d.Strings.day)]}),(0,r.jsx)("div",{className:ce().user,children:(0,r.jsx)(oe.b,{unitId:p,avatar:m,avatarColor:S,nickName:f,name:n,deletable:!1,title:x})}),(0,r.jsx)(D.u,{title:h,textEllipsis:!0,children:(0,r.jsx)("div",{className:ce().expirationTime,children:ie()(h).format("YYYY-MM-DD HH:mm:ss")})}),(0,r.jsx)(D.u,{title:v||t,textEllipsis:!0,children:(0,r.jsx)("div",{className:ce().path,children:v||t})}),(0,r.jsx)(pe,{nodeId:o,data:z,children:(0,r.jsx)(D.EE.Icon,{icon:(0,r.jsx)(u.MoreStandOutlined,{})})})]},o)})),(0,r.jsxs)("div",{className:ce().bottom,children:[E&&(0,r.jsx)("span",{className:ce().end,children:(0,d.t)(d.Strings.end)}),(s!==(null===g.SubscribeGrade||void 0===g.SubscribeGrade?void 0:g.SubscribeGrade.Enterprise)||s===(null===g.SubscribeGrade||void 0===g.SubscribeGrade?void 0:g.SubscribeGrade.Enterprise)&&!E)&&(0,r.jsx)("div",{style:{marginTop:8},children:V?(0,r.jsx)(c.Button,{loading:!0,variant:"jelly",children:(0,d.t)(d.Strings.loading)}):(0,r.jsx)(c.TextButton,{onClick:H,color:"primary",children:(0,d.t)(d.Strings.click_load_more)})})]})]}):L||V?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Skeleton,{width:"38%"}),(0,r.jsx)(c.Skeleton,{}),(0,r.jsx)(c.Skeleton,{width:"61%"})]}):(0,r.jsxs)("div",{className:ce().empty,children:[(0,r.jsx)(P(),{src:T,alt:"empty",width:320,height:240}),(0,r.jsx)("div",{className:ce().tip,children:(0,d.t)(d.Strings.empty_trash,{day:o})}),(0,r.jsx)(c.TextButton,{onClick:H,color:"primary",style:{marginTop:8},children:(0,d.t)(d.Strings.click_load_more)})]})]})]})})},ge=n(862218),he=n(660059),ve=n(821863),fe="/_next/static/media/workbench_upgrade_succeed_dark.3f4e6690.png",Se="/_next/static/media/workbench_upgrade_succeed_light.496e6394.png",xe=n(158519),ye=n(714190),Ae=n.n(ye),Te=function(){var e=(0,b.useDispatch)(),t=(0,ve.cF)(ve.mL.SplitPos),n=t&&280!==t?t:335,i=(0,b.useSelector)((function(e){return e.catalogTree.editNodeId})),s=(0,b.useSelector)((function(e){return e.catalogTree.favoriteEditNodeId})),p=(0,b.useSelector)((function(e){return e.pageParams.shareId})),T=(0,b.useSelector)((function(e){return e.user.info.spaceId})),N=(0,B.mF)(),I=N.getFavoriteNodeListReq,w=N.getTreeDataReq,C=(0,B.QT)(I,{manual:!0}).run,E=(0,B.QT)(w,{manual:!0}).run,k=(0,B.Fs)().screenIsAtMost,U=(0,j.useRef)(null),P=(0,j.useState)(!1),R=P[0],L=P[1],O=k(M._.md),V=(0,B.aM)(),F=(0,S.useRouter)(),G=(0,c.useTheme)(),Z=(0,j.useState)(ge.Sv.None),z=Z[0],H=Z[1],K=(0,j.useState)(ge.WW.None),Q=K[0],ee=K[1],ne=(0,j.useState)(!1),re=ne[0],ie=ne[1],se=(0,b.useSelector)((function(e){return e.space.sideBarVisible}));(0,m.Z)((function(){V.get("choosePlan")&&!O&&function(){var e=document.createElement("div");document.body.appendChild(e);var t=(0,$.createRoot)(e),n=function(){t.unmount(),e.parentElement.removeChild(e),location.search=""};t.render((0,r.jsx)("div",{onMouseDown:Y.UW,children:(0,r.jsxs)(X.Modal,{visible:!0,wrapClassName:te().modalWrapper,maskClosable:!1,closeIcon:null,onCancel:n,destroyOnClose:!0,width:"1200px",footer:null,centered:!0,zIndex:1100,children:[(0,r.jsxs)("div",{className:te().header,children:[(0,r.jsx)(c.Typography,{variant:"h6",children:(0,d.t)(d.Strings.upgrade)}),(0,r.jsx)(u.CloseOutlined,{color:c.colorVars.fc3,size:16,onClick:n})]}),(0,r.jsx)(J.default,{})]})}))}()})),(0,m.Z)((function(){V.get("stripePaySuccess")&&!O&&(0,g.showOrderModal)({modalTitle:(0,d.t)(d.Strings.upgrade_success_model,{orderType:(0,d.t)(d.Strings.upgrade)}),modalSubTitle:function(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:Ae().desc1,style:{marginTop:24,fontSize:16},children:(0,r.jsx)(x.h,{tkey:(0,d.t)(d.Strings.upgrade_success_1_desc),params:{orderType:(0,d.t)(d.Strings.upgrade),position:(0,r.jsx)(c.LinkButton,{className:Ae().linkButton,style:{display:"inline-block"},onClick:function(){O||A.F.redirect(d.Navigation.SPACE_MANAGE,{params:{pathInSpace:"overview"},clearQuery:!0})},children:(0,d.t)(d.Strings.space_overview)})}})})})},qrCodeUrl:"",illustrations:(0,r.jsx)("img",{width:"250px",src:"light"===G.palette.type?Se:fe,style:{marginTop:16}}),btnText:(0,d.t)(d.Strings.got_it)})}));var ae=function(t,n){var r=n||!n&&se?ge.Sv.User:ge.Sv.UserWithoutPanel;H(r),(!n||n&&se)&&ee(ge.WW.User),(0,ve.po)(ve.mL.IsPanelClosed,t,ve.yK.Set),e(d.StoreActions.setSideBarVisible(t))};(0,m.Z)((function(){!function(e){var t=he.h.getState(),n=t.user.info,r=t.space.activeId,i=(0,B.B_)(e),s=i.datasheetId,a=i.folderId,o=i.viewId,l=i.recordId,c=i.formId,u=i.widgetId,m=i.mirrorId,p=i.dashboardId,_=s||a||c||m||p;if(r===n.spaceId){if(m)return void A.F.replace(d.Navigation.WORKBENCH,{params:{spaceId:r||n.spaceId,nodeId:m,datasheetId:s||n.activeNodeId,viewId:o||n.activeViewId,recordId:l,widgetId:u}});A.F.replace(d.Navigation.WORKBENCH,{params:{spaceId:r||n.spaceId,nodeId:_||n.activeNodeId,viewId:o||n.activeViewId,recordId:l,widgetId:u}})}else A.F.replace(d.Navigation.WORKBENCH,{params:{spaceId:r,nodeId:_,viewId:o,recordId:l}})}(F.asPath),e(d.StoreActions.setTreeLoading(!0)),d.Player.doTrigger(d.Events.workbench_shown)})),(0,m.Z)((function(){var e=V.get("notifyId");e&&d.Api.transferNoticeToRead([e])})),(0,j.useEffect)((function(){window.dispatchEvent(new Event("resize"))}),[se]),(0,j.useEffect)((function(){if(!(O||p||(0,W.UM)()))return!Boolean(localStorage.getItem("vikaby_closed"))&&(null===g.showVikaby||void 0===g.showVikaby||(0,g.showVikaby)()),function(){null===g.destroyVikaby||void 0===g.destroyVikaby||(0,g.destroyVikaby)()};null===g.destroyVikaby||void 0===g.destroyVikaby||(0,g.destroyVikaby)()}),[O,p]),(0,j.useEffect)((function(){var e=new Map([[v.ShortcutActionName.ToggleCatalogPanel,function(){ae(!se,re)}]]);return e.forEach((function(e,t){v.ShortcutActionManager.bind(t,e)})),function(){e.forEach((function(e,t){v.ShortcutActionManager.unbind(t)}))}})),(0,j.useEffect)((function(){T&&(e(d.StoreActions.initCatalogTree()),E(),C())}),[T,e]);var oe;(0,j.useEffect)((function(){var e=function(e){s||i||!R||R&&e.clientX<n||U.current&&U.current.contains(e.target)||L(!1)};return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[R,n,U,i,s]),(0,m.Z)((0,a.Z)((function(){var e,t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return t=d.ConfigConstant.WizardIdConstant.AGREE_TERMS_OF_SERVICE,[4,null===(e=h.uj.set_wizard_completed)||void 0===e?void 0:e.call(h.uj,{wizardId:t})];case 1:return n.sent(),localStorage.removeItem("".concat(t)),[2]}}))})));var le,ce,de=_()((oe={},(0,o.Z)(oe,Ae().closeBtn,!0),(0,o.Z)(oe,Ae().isPanelClose,!se),oe)),ue=!se&&!R,me=F.asPath.includes("trash")?(0,r.jsx)(_e,{}):(0,r.jsx)(q,{}),pe={toggleType:z,clickType:Q,onSetClickType:ee,onSetToggleType:H,onSetPanelVisible:ie,onSetSideBarVisibleByUser:ae,onSetSideBarVisibleByOhter:function(t){(0,ve.po)(ve.mL.IsPanelClosed,t,ve.yK.Set),e(d.StoreActions.setSideBarVisible(t))}};return(0,r.jsxs)("div",{id:d.AutoTestID.WORKBENCH_PAGE,className:_()((le={},(0,o.Z)(le,Ae().dataspace,!0),(0,o.Z)(le,Ae().hiddenCatalog,!se&&!O),le)),children:[(0,r.jsx)(M.d,{minWidthCompatible:M._.md,children:(0,r.jsx)(ge.jX.Provider,{value:pe,children:(0,r.jsx)(D.JG,{panelLeft:(0,r.jsxs)("div",{style:{width:se?"100%":0},className:Ae().splitLeft,"data-test-id":"workspace-sidebar",children:[(0,r.jsxs)("div",{style:{width:se?"100%":R?n:0,overflow:ue?"hidden":"inherit"},className:_()(Ae().menuWrap,"workspaceMenu",(ce={},(0,o.Z)(ce,Ae().animationOpen,R),(0,o.Z)(ce,Ae().animationClose,ue),ce)),ref:U,children:[(0,r.jsx)(y.W,{}),(0,r.jsx)("div",{className:Ae().wrapper,children:(0,r.jsx)(xe.q,{})})]}),(0,r.jsx)(D.u,{title:"".concat(se?(0,d.t)(d.Strings.hidden):(0,d.t)(d.Strings.expand)," ").concat((0,f.kS)(v.ShortcutActionName.ToggleCatalogPanel)),placement:se?"bottom":"right",arrowPointAtCenter:!0,children:(0,r.jsx)("div",{className:de,onClick:function(){ae(!se,re)},onMouseEnter:function(){se||R||L(!0)},"data-test-id":"sidebar-toggle-btn",children:se?(0,r.jsx)(u.CollapseOutlined,{}):(0,r.jsx)(u.CollapseOpenOutlined,{})})})]}),panelRight:(0,r.jsx)("div",{className:Ae().splitRight,children:me}),split:"vertical",minSize:335,defaultSize:n,maxSize:640,style:{overflow:"none"},pane2Style:{overflow:"hidden"},size:se?n:0,onChange:function(e){window.dispatchEvent(new Event("resize")),(0,ve.po)(ve.mL.SplitPos,e,ve.yK.Set)},allowResize:se})})}),(0,r.jsx)(M.d,{maxWidthCompatible:M._.md,children:(0,r.jsx)("div",{className:Ae().splitRight,style:{flexDirection:"column"},children:me})})]})},je=function(){return(0,r.jsx)(i.M,{children:(0,r.jsx)(s.f,{children:(0,r.jsx)(Te,{})})})}},302845:function(e,t,n){"use strict";n.r(t);var r=n(798788),i=n(745680),s=n(552322),a=n(323440),o=n(914463),l=n(223258),c=n(585421),d=n(202784),u=n(829051),m=n(301575),p=n.n(m),_=n(351253),g=function(e){return e.length<2?e:e.charAt(0).toUpperCase()+e.slice(1)};t.default=function(){var e=(0,d.useRef)(null),t=(0,u.useSelector)((function(e){return e.space.activeId})),n=(0,u.useSelector)((function(e){var t;return null===(t=e.billing)||void 0===t?void 0:t.subscription}))||{},m=n.product,h=n.recurringInterval,v=(0,d.useState)(!0),f=v[0],S=v[1],x=(0,c.Sy)(),y=(0,d.useState)(x.CLOUD_DISABLE_BILLING_UPGRADE),A=y[0],T=y[1];if((0,d.useEffect)((function(){if(e){var n=function(){var t,n;null===(t=e.current)||void 0===t||null===(n=t.contentWindow)||void 0===n||n.postMessage({msg:"fromVikaUpgrade",product:m,recurringInterval:h},"*")},s=function(e){if(e){var n=e.data,s=n.msg,c=n.pageType,d=n.grade,u=n.priceId;if("pageLoaded"===s&&S(!1),"toDowngrade"!==s||!d)return"toUpgrade"===s?d?void l.u_.info({title:(0,a.t)(a.Strings.upgrade),content:(0,a.t)(a.Strings.upgrade_content),hiddenCancelBtn:!1,okText:(0,a.t)(a.Strings.modal_upgrade_btn_txt,{grade:g(d)}),cancelText:(0,a.t)(a.Strings.cancel),zIndex:1100,onOk:(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,a.Api.checkoutOrder(t,u)];case 1:return e=r.sent(),n=e.data.url,location.href=n,[2]}}))}))}):void window.open("/space/".concat(t,"/upgrade"),"_blank","noopener,noreferrer"):void("changePeriod"!==s?("contactUs"===s&&(0,o.showUpgradeContactUs)(),c&&window.open("/space/".concat(t,"/upgrade?pageType=").concat(c),"_blank","noopener,noreferrer")):l.u_.warning({title:(0,a.t)(a.Strings.billing_interval),content:(0,a.t)(a.Strings.change_period_content),hiddenCancelBtn:!1,cancelText:(0,a.t)(a.Strings.cancel),zIndex:1100,onOk:(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,a.Api.checkoutOrder(t,u)];case 1:return e=r.sent(),n=e.data.url,location.href=n,[2]}}))}))}));l.u_.warning({title:(0,a.t)(a.Strings.downgrade),content:(0,a.t)(a.Strings.downgrade_content),hiddenCancelBtn:!1,okText:(0,a.t)(a.Strings.modal_downgrade_btn_txt,{grade:g(d)}),cancelText:(0,a.t)(a.Strings.cancel),zIndex:1100,onOk:(0,r.Z)((function(){var e,n;return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return[4,a.Api.checkoutOrder(t,u)];case 1:return e=r.sent(),n=e.data.url,location.href=n,[2]}}))}))})}},c=e.current;return null===c||void 0===c||c.addEventListener("load",n),window.addEventListener("message",s),function(){null===c||void 0===c||c.removeEventListener("load",n),window.removeEventListener("message",s)}}}),[t,m]),A)return o.Trial&&(0,s.jsx)(o.Trial,{setShowTrialModal:T,title:(0,a.t)(a.Strings.upgrade_space)});var j=location.origin+"/pricing/";return(0,s.jsxs)("div",{className:p().container,children:[f&&(0,s.jsxs)("div",{className:p().loading,children:[(0,s.jsx)(_.Skeleton,{width:"38%"}),(0,s.jsx)(_.Skeleton,{count:2}),(0,s.jsx)(_.Skeleton,{width:"61%"}),(0,s.jsx)(_.Skeleton,{width:"38%"}),(0,s.jsx)(_.Skeleton,{count:2}),(0,s.jsx)(_.Skeleton,{width:"61%"}),(0,s.jsx)(_.Skeleton,{width:"38%"}),(0,s.jsx)(_.Skeleton,{count:2}),(0,s.jsx)(_.Skeleton,{width:"61%"})]}),(0,s.jsx)("iframe",{src:j,ref:e})]})}},38050:function(e){e.exports={noAccess:"style_noAccess__IkLNE",logo:"style_logo__EXQXf",noAccessImage:"style_noAccessImage__u04hh"}},301575:function(e){e.exports={antiEllipsis:"style_antiEllipsis__FzE85",noSelect:"style_noSelect__vPMS3",antSelectOptionCommon:"style_ant-select-option-common__rrqkb",flexCenter:"style_flexCenter__CQ73s",inputErrorMsg:"style_inputErrorMsg__27BnV",tree:"style_tree__Xi4WT",lightTree:"style_lightTree__RJZgE",darkTree:"style_darkTree__qLF07",container:"style_container__F3Uxi",loading:"style_loading__1NqsY",header:"style_header__E1DB7",modalWrapper:"style_modalWrapper__ydAFW"}},404633:function(e){e.exports={antiEllipsis:"style_antiEllipsis__G0Aw1",noSelect:"style_noSelect__tmJuD",antSelectOptionCommon:"style_ant-select-option-common__oZpDb",flexCenter:"style_flexCenter__aP0QU",inputErrorMsg:"style_inputErrorMsg__nvj0K",tree:"style_tree__wdapm",lightTree:"style_lightTree__vAEof",darkTree:"style_darkTree__Mz4Bu",trashWrapper:"style_trashWrapper__322CV",container:"style_container__HPdxA",title:"style_title__tw35o",tip:"style_tip__xVL0d",maxRemainTrashDays:"style_maxRemainTrashDays__56rj2",trashList:"style_trashList__VrpqH",listTitle:"style_listTitle__5ZHfz",listBody:"style_listBody__m2QfO",bottom:"style_bottom__sNBVf",end:"style_end__eE2lZ",trashListItem:"style_trashListItem__Ij1d_",nodeName:"style_nodeName__qSKPn",remainingTime:"style_remainingTime__2mR0s",days:"style_days__8lzxA",redPrompt:"style_redPrompt__KVl_e",user:"style_user__hLSy1",expirationTime:"style_expirationTime__od3J_",path:"style_path__SjCQf",operation:"style_operation__ev7LT",empty:"style_empty__4l4a_",itemRow:"style_itemRow__lvxV7"}},896862:function(e){e.exports={trashContextMenu:"style_trashContextMenu__uZPJ3"}},714190:function(e){e.exports={antiEllipsis:"style_antiEllipsis__gPGVm",noSelect:"style_noSelect__ToeCL",antSelectOptionCommon:"style_ant-select-option-common__5uoSq",flexCenter:"style_flexCenter__oK_te",inputErrorMsg:"style_inputErrorMsg__TFdGm",tree:"style_tree__2AueO",lightTree:"style_lightTree__fbRoc",darkTree:"style_darkTree__mCy_6",dataspace:"style_dataspace__3c3f7",pane2:"style_Pane2__K3_UY",splitRight:"style_splitRight__ELUPp",splitLeft:"style_splitLeft__6IILH",menuWrap:"style_menuWrap__51j8U",animationOpen:"style_animationOpen__UF4yD",animationClose:"style_animationClose__uX2X2",wrapper:"style_wrapper__Q0Uw8",closeBtn:"style_closeBtn__vSbys",isPanelClose:"style_isPanelClose__9ShVh",nickNameWrapper:"style_nickNameWrapper__g7mO9",nickNameImg:"style_nickNameImg__FBzxa",err:"style_err__HVw0w",tip:"style_tip__VJUGj",nickName:"style_nickName__xgwE4",submit:"style_submit__uGEH1"}},328498:function(e){e.exports={welcome:"style_welcome__5N1j6",contentWrapper:"style_contentWrapper__ABaB4",tip:"style_tip__62E4F",guide:"style_guide__U_fKO",scrollWrapper:"style_scrollWrapper__eTrIL",container:"style_container__xDdIZ",guideItem:"style_guideItem__ueRRf",titleWrapper:"style_titleWrapper__ix5oQ",title:"style_title__bjl2U",rightBtn:"style_rightBtn__KoR39",moduleContainer:"style_moduleContainer__dAZWN",moduleItem:"style_moduleItem___g0Kb",moduleImg:"style_moduleImg__zdry4",videoBtn:"style_videoBtn__T4W19",mobileGuide:"style_mobileGuide__6Qh8x",moreTemplateBtn:"style_moreTemplateBtn__7vbR4"}}}]);