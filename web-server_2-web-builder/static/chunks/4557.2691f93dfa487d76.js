(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4557],{744557:function(e,n,s){"use strict";s.r(n);var r=s(798788),t=s(347842),o=s(387394),i=s(745680),a=s(552322),d=s(351253),c=s(323440),g=s(616652),l=s(773941),p=s(864453),u=s(178234),C=s(585421),_=s(202784),f=s(223258),h=s(914463),w=s(468372),y=s.n(w),m={accountErrMsg:"",identifyingCodeErrMsg:"",passwordErrMsg:""};n.default=function(){var e=(0,o.Z)((0,p.vA)({areaCode:"",account:"",identifyingCode:"",password:"",secondPassword:""}),2),n=e[0],s=e[1],w=(0,C.Sy)().LOGIN_DEFAULT_ACCOUNT_TYPE,M=(0,o.Z)(_.useState((null===w||void 0===w?void 0:w.includes(c.ConfigConstant.LoginMode.PHONE))?(null===h.initMode||void 0===h.initMode?void 0:(0,h.initMode)())||c.ConfigConstant.LoginMode.PHONE:w),2),E=M[0],v=M[1],S=(0,o.Z)((0,p.vA)(m),2),b=S[0],x=S[1],N=(0,p.CL)(),P=N.retrievePwdReq,T=N.loginOrRegisterReq,O=(0,p.QT)(P,{manual:!0}),j=O.run,k=O.loading,B=function(){var e=b.accountErrMsg,n=b.identifyingCodeErrMsg,s=b.passwordErrMsg;(e||n||s)&&x(m)},L=function(e,n){var r=e.target.value.trim();B(),s((0,t.Z)({},n,r))},R=function(){var e=(0,r.Z)((function(){var e,s,r,t,o,a,d,g,l,p;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e=n.areaCode,s=n.account,r=n.identifyingCode,t=n.password,o=n.secondPassword,t!==o?(x({passwordErrMsg:(0,c.t)(c.Strings.password_not_identical_err)}),[2]):(a=E===c.ConfigConstant.LoginMode.PHONE?c.ConfigConstant.CodeTypes.SMS_CODE:c.ConfigConstant.CodeTypes.EMAIL_CODE,[4,j(e,s,r,t,a)]);case 1:if(d=i.sent(),g=d.code,l=d.success,p=d.message,!l){switch(g){case c.StatusCode.ACCOUNT_ERROR:x({accountErrMsg:p});break;case c.StatusCode.PASSWORD_ERR:x({passwordErrMsg:p});break;default:x({identifyingCodeErrMsg:p})}return[2]}return setTimeout((function(){(0,u.Xg)((function(n){T({username:s,credential:t,type:c.ConfigConstant.LoginTypes.PASSWORD,areaCode:e,data:n})}))}),1e3),[2]}}))}));return function(){return e.apply(this,arguments)}}(),A=!(n.account&&n.identifyingCode&&n.password&&n.secondPassword);return(0,a.jsx)(d.ThemeProvider,{theme:d.ThemeName.Light,children:(0,a.jsx)(f.im,{children:(0,a.jsx)("div",{className:y().resetPwdWrapper,children:(0,a.jsxs)("div",{className:y().resetPwdBox,children:[(0,a.jsx)(d.Typography,{variant:"h5",className:y().title,children:(0,c.t)(c.Strings.reset_password)}),(0,a.jsxs)(g.Z,{onFinish:R,children:[h.IdentifyingCodeModes&&(0,a.jsx)(h.IdentifyingCodeModes,{smsType:c.ConfigConstant.SmsTypes.MODIFY_PASSWORD,emailType:c.ConfigConstant.EmailCodeType.COMMON,onModeChange:function(e){v(e)},error:{accountErrMsg:b.accountErrMsg,identifyingCodeErrMsg:b.identifyingCodeErrMsg},onChange:function(e){B();var n=e.areaCode,r=e.account,t=e.credential;s({areaCode:n,account:r,identifyingCode:t})},mode:E}),(0,a.jsx)(d.Typography,{variant:"body2",className:y().gap,children:(0,c.t)(c.Strings.input_new_password)}),(0,a.jsx)(f.k6,{tip:b.passwordErrMsg,children:(0,a.jsx)(f.WU,{placeholder:(0,c.t)(c.Strings.password_rules),onChange:function(e){return L(e,"password")},autoComplete:"new-password",block:!0})}),(0,a.jsx)(d.Typography,{variant:"body2",className:y().gap,children:(0,c.t)(c.Strings.input_confirmation_password)}),(0,a.jsx)(f.k6,{tip:"",children:(0,a.jsx)(f.WU,{error:Boolean(b.passwordErrMsg),placeholder:(0,c.t)(c.Strings.placeholder_input_new_password_again),onChange:function(e){return L(e,"secondPassword")},autoComplete:"new-password",block:!0})}),(0,a.jsx)(d.Button,{className:y().confirmBtn,type:"submit",color:"primary",size:"large",disabled:A,loading:k,block:!0,children:(0,c.t)(c.Strings.confirm)}),(0,a.jsx)("div",{className:y().backBtn,children:(0,a.jsx)("span",{onClick:function(){l.F.push(c.Navigation.LOGIN)},children:(0,c.t)(c.Strings.back_login)})})]})]})})})})}},468372:function(e){e.exports={resetPwdWrapper:"style_resetPwdWrapper__hEBYc",resetPwdBox:"style_resetPwdBox__bsXqn",title:"style_title__l0aDC",gap:"style_gap__4V8iQ",confirmBtn:"style_confirmBtn___87bA",backBtn:"style_backBtn__H1X4L",tabs:"style_tabs__wvicM"}}}]);