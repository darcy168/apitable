exports.id = 5420;
exports.ids = [5420];
exports.modules = {

/***/ 2369:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _app_node_modules_next_dist_compiled_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23769);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);

var __jsx = react__WEBPACK_IMPORTED_MODULE_0__.createElement;


var SvgTemplateImgCardbg = function SvgTemplateImgCardbg(props) {
  return __jsx("svg", (0,_app_node_modules_next_dist_compiled_babel_runtime_helpers_esm_extends_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .Z)({
    viewBox: "0 0 68 26",
    xmlSpace: "preserve",
    width: "1em",
    height: "1em"
  }, props), __jsx("path", {
    d: "M0 26v-6c7.5 0 14-4.4 17.1-10.7C20.6 3.7 26.9 0 34 0s13.4 3.7 16.9 9.3C54 15.6 60.5 20 68 20v6H0z"
  }));
};

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SvgTemplateImgCardbg);

/***/ }),

/***/ 7958:
/***/ ((module) => {

// Exports
module.exports = {
	"albumItemWrapper": "style_albumItemWrapper__0tyBY",
	"templateDetailWrapper": "style_templateDetailWrapper__3MKZq",
	"listEmpty": "style_listEmpty__4J5EJ",
	"text": "style_text___LYfG",
	"templateCategory": "style_templateCategory__e7G4G",
	"title": "style_title__3QNWG",
	"categoryName": "style_categoryName__8n6Lb",
	"notFoundTip": "style_notFoundTip__m5kAC",
	"templateList": "style_templateList__tCMbr",
	"templateItemWrapper": "style_templateItemWrapper__CNO7e"
};


/***/ }),

/***/ 42102:
/***/ ((module) => {

// Exports
module.exports = {
	"templateChoiceWrapper": "style_templateChoiceWrapper__oVlyN",
	"notFoundTip": "style_notFoundTip__MW9yO",
	"text": "style_text__3_dza",
	"templateChoice": "style_templateChoice__1RiGK",
	"category": "style_category__patr_",
	"categoryName": "style_categoryName__j8sGE",
	"topBannerWrapper": "style_topBannerWrapper__WAWT4",
	"recommendWrapper": "style_recommendWrapper__BW2ar",
	"recommendItem": "style_recommendItem__QHG_7",
	"templateList": "style_templateList__st_xp",
	"templateItemWrapper": "style_templateItemWrapper__KrWoI"
};


/***/ }),

/***/ 36475:
/***/ ((module) => {

// Exports
module.exports = {
	"antiEllipsis": "style_antiEllipsis__C2Gtz",
	"noSelect": "style_noSelect__AN_8w",
	"antSelectOptionCommon": "style_ant-select-option-common__lnuvK",
	"flexCenter": "style_flexCenter__ZlJ0a",
	"inputErrorMsg": "style_inputErrorMsg__qv_Nl",
	"tree": "style_tree__1ZuUE",
	"lightTree": "style_lightTree__H6gAY",
	"darkTree": "style_darkTree__MdWCG",
	"templateItem": "style_templateItem__FgBu1",
	"card": "style_card__zzL3E",
	"moreBtnWrapper": "style_moreBtnWrapper__HFcsH",
	"moreBtn": "style_moreBtn__2ap1P",
	"banner": "style_banner__8e7dN",
	"backgroundImage": "style_backgroundImage__QU1P5",
	"wrapper": "style_wrapper__h7XeF",
	"avatarBackground": "style_avatarBackground__nHJPf",
	"bannerDesc": "style_bannerDesc__lcf_C",
	"title": "style_title__KSNXm",
	"desc": "style_desc__aGiLT",
	"mediumBanner": "style_mediumBanner__Km8YX",
	"userAvatar": "style_userAvatar__Pj18J",
	"templateInfo": "style_templateInfo__3_W_I",
	"name": "style_name__3FkfM",
	"tags": "style_tags__NF5He",
	"tag": "style_tag__NbuMT",
	"moreContextMenu": "style_moreContextMenu__gm54a",
	"contextMenuItem": "style_contextMenuItem__jdlaO",
	"icon": "style_icon__RWX_u"
};


/***/ }),

/***/ 9092:
/***/ ((module) => {

// Exports
module.exports = {
	"templatePreview": "style_templatePreview__pXs4d",
	"headerBar": "style_headerBar___A7A8",
	"templateList": "style_templateList__3PbjW",
	"optBtn": "style_optBtn__HF1PV",
	"title": "style_title__J9oEQ",
	"sideBarMask": "style_sideBarMask__flUXd"
};


/***/ }),

/***/ 61211:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "R": () => (/* reexport safe */ _template_category_detail__WEBPACK_IMPORTED_MODULE_0__.R)
/* harmony export */ });
/* harmony import */ var _template_category_detail__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20665);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_template_category_detail__WEBPACK_IMPORTED_MODULE_0__]);
_template_category_detail__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
/**
 * APITable <https://github.com/apitable/apitable>
 * Copyright (C) 2022 APITable Ltd. <https://apitable.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */ 

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 20665:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "R": () => (/* binding */ TemplateCategoryDetail)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apitable_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23440);
/* harmony import */ var _apitable_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apitable_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _apitable_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(64754);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(12746);
/* harmony import */ var context_template_list__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7682);
/* harmony import */ var html_react_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(40264);
/* harmony import */ var html_react_parser__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(html_react_parser__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(46517);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(96577);
/* harmony import */ var next_image__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_image__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var enterprise__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(14463);
/* harmony import */ var pc_components_route_manager_navigation_to_url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(51331);
/* harmony import */ var pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(72932);
/* harmony import */ var pc_hooks__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(22829);
/* harmony import */ var pc_hooks_use_app_dispatch__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(36367);
/* harmony import */ var pc_hooks_use_template_request__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(49096);
/* harmony import */ var pc_utils_env__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(85421);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(6022);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var static_icon_datasheet_empty_state_dark_png__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(84577);
/* harmony import */ var static_icon_datasheet_empty_state_light_png__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(17763);
/* harmony import */ var _template_choice__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(22778);
/* harmony import */ var _template_item__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(61171);
/* harmony import */ var _style_module_less__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(7958);
/* harmony import */ var _style_module_less__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_style_module_less__WEBPACK_IMPORTED_MODULE_19__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_apitable_components__WEBPACK_IMPORTED_MODULE_2__, pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_8__, pc_hooks__WEBPACK_IMPORTED_MODULE_9__, _template_choice__WEBPACK_IMPORTED_MODULE_17__, _template_item__WEBPACK_IMPORTED_MODULE_18__]);
([_apitable_components__WEBPACK_IMPORTED_MODULE_2__, pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_8__, pc_hooks__WEBPACK_IMPORTED_MODULE_9__, _template_choice__WEBPACK_IMPORTED_MODULE_17__, _template_item__WEBPACK_IMPORTED_MODULE_18__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
/**
 * APITable <https://github.com/apitable/apitable>
 * Copyright (C) 2022 APITable Ltd. <https://apitable.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */ 







// @ts-ignore



// import { Modal } from 'pc/components/common';











const defaultBanner = (0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.integrateCdnHost)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Settings.workbench_folder_default_cover_list.value.split(",")[0]);
const TemplateCategoryDetail = (props)=>{
    const { setUsingTemplate , templateCategory  } = props;
    const { templateListData  } = (0,react__WEBPACK_IMPORTED_MODULE_13__.useContext)(context_template_list__WEBPACK_IMPORTED_MODULE_3__/* .TemplateListContext */ .J);
    const { 0: templateList , 1: setTemplateList  } = (0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(()=>{
        return templateListData || null;
    });
    const { 0: isOfficial , 1: setIsOfficial  } = (0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(true);
    const dispatch = (0,pc_hooks_use_app_dispatch__WEBPACK_IMPORTED_MODULE_10__/* .useAppDispatch */ .T)();
    const user = (0,react_redux__WEBPACK_IMPORTED_MODULE_14__.useSelector)((state)=>state.user.info);
    const spaceId = (0,react_redux__WEBPACK_IMPORTED_MODULE_14__.useSelector)((state)=>state.space.activeId);
    const categoryId = (0,react_redux__WEBPACK_IMPORTED_MODULE_14__.useSelector)((state)=>state.pageParams.categoryId);
    const { getTemplateCategoriesReq , getTemplateListReq , deleteTemplateReq  } = (0,pc_hooks_use_template_request__WEBPACK_IMPORTED_MODULE_11__/* .useTemplateRequest */ .T)();
    const { run: deleteTemplate  } = (0,pc_hooks__WEBPACK_IMPORTED_MODULE_9__/* .useRequest */ .QT)(deleteTemplateReq, {
        manual: true
    });
    const { run: getTemplateList , data: templateData , loading  } = (0,pc_hooks__WEBPACK_IMPORTED_MODULE_9__/* .useRequest */ .QT)(getTemplateListReq, {
        manual: true
    });
    const env = (0,pc_utils_env__WEBPACK_IMPORTED_MODULE_12__/* .getEnvVariables */ .Sy)();
    const { run: getTemplateCategories , data: templateCategories  } = (0,pc_hooks__WEBPACK_IMPORTED_MODULE_9__/* .useRequest */ .QT)(getTemplateCategoriesReq, {
        manual: true
    });
    const themeName = (0,react_redux__WEBPACK_IMPORTED_MODULE_14__.useSelector)((state)=>state.theme);
    const templateEmptyPng = themeName === _apitable_components__WEBPACK_IMPORTED_MODULE_2__.ThemeName.Light ? static_icon_datasheet_empty_state_light_png__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .Z : static_icon_datasheet_empty_state_dark_png__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .Z;
    (0,react__WEBPACK_IMPORTED_MODULE_13__.useEffect)(()=>{
        // Login status is required to access the space station template
        if (categoryId === "tpcprivate" && user) {
            setIsOfficial(false);
            getTemplateList(spaceId, "", true);
            !user.isMainAdmin && dispatch(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.StoreActions.spaceResource());
            return;
        }
        setIsOfficial(true);
        getTemplateCategories(categoryId);
    // eslint-disable-next-line
    }, [
        categoryId,
        user
    ]);
    (0,react__WEBPACK_IMPORTED_MODULE_13__.useEffect)(()=>{
        if (isOfficial) {
            setTemplateList(templateCategories || null);
        }
        if (templateData && !isOfficial) {
            setTemplateList(templateData);
        }
    }, [
        isOfficial,
        templateData,
        templateCategories
    ]);
    const delTemplateConfirm = (templateId)=>{
        Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 11156)).then(({ Modal  })=>{
            Modal.confirm({
                type: "danger",
                title: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Strings.delete_template_title),
                content: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Strings.delete_template_content),
                onOk: ()=>{
                    delTemplate(templateId);
                }
            });
        });
    };
    const delTemplate = async (templateId)=>{
        if (!templateList) {
            return;
        }
        const result = await deleteTemplate(templateId);
        if (result) {
            setTemplateList(templateList.filter((template)=>template.templateId !== templateId));
        }
    };
    const openTemplateDetail = ({ templateId  })=>{
        pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_8__/* .Router.push */ .F.push(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Navigation.TEMPLATE, {
            params: {
                spaceId,
                categoryId: categoryId || _apitable_core__WEBPACK_IMPORTED_MODULE_1__.ConfigConstant.TEMPLATE_CHOICE_CATEGORY_ID,
                templateId
            }
        });
    };
    if (!templateList || loading) {
        return null;
    }
    const currentCategory = templateCategory.find((item)=>item.categoryCode === categoryId);
    const openTemplateAlbumDetail = ({ templateId  })=>{
        pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_8__/* .Router.push */ .F.push(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Navigation.TEMPLATE, {
            params: {
                spaceId,
                albumId: templateId,
                categoryId: "album"
            }
        });
    };
    return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().templateDetailWrapper),
        children: (0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(templateList) ? /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().listEmpty),
            children: [
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx((next_image__WEBPACK_IMPORTED_MODULE_6___default()), {
                    src: templateEmptyPng,
                    alt: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Strings.template_no_template),
                    width: 320,
                    height: 240
                }),
                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().text),
                    children: html_react_parser__WEBPACK_IMPORTED_MODULE_4___default()((0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Strings.how_create_template))
                })
            ]
        }) : /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_20__/* .Row */ .X2, {
            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().templateCategory),
            children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_20__/* .Col */ .JX, {
                span: 24,
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_20__/* .Row */ .X2, {
                        children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_20__/* .Col */ .JX, {
                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().title),
                            children: [
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().categoryName),
                                    children: !isOfficial ? (0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Strings.all) : currentCategory && currentCategory.categoryName
                                }),
                                env.TEMPLATE_FEEDBACK_FORM_URL && !(0,pc_utils_env__WEBPACK_IMPORTED_MODULE_12__/* .isMobileApp */ .k)() && !(0,enterprise__WEBPACK_IMPORTED_MODULE_21__.isWecomFunc)?.() && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_apitable_components__WEBPACK_IMPORTED_MODULE_2__.Typography, {
                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().notFoundTip),
                                    variant: "body2",
                                    align: "center",
                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                                        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().text),
                                        onClick: ()=>(0,pc_components_route_manager_navigation_to_url__WEBPACK_IMPORTED_MODULE_7__/* .navigationToUrl */ .S)(`${env.TEMPLATE_FEEDBACK_FORM_URL}`),
                                        children: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Strings.template_not_found)
                                    })
                                })
                            ]
                        })
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                        children: Array.isArray(templateList) ? /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().templateList),
                            children: templateList.map((template)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().templateItemWrapper),
                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_item__WEBPACK_IMPORTED_MODULE_18__/* .TemplateItem */ .c, {
                                        type: "card",
                                        nodeType: template.nodeType,
                                        templateId: template.templateId,
                                        img: (0,_template_choice__WEBPACK_IMPORTED_MODULE_17__/* .imgUrl */ .X)(template.cover || defaultBanner, 160),
                                        name: template.templateName,
                                        description: template.description,
                                        tags: template.tags,
                                        isOfficial: isOfficial,
                                        creator: {
                                            name: template.nickName,
                                            avatar: template.avatar,
                                            userId: template.uuid
                                        },
                                        deleteTemplate: delTemplateConfirm,
                                        usingTemplate: setUsingTemplate,
                                        onClick: openTemplateDetail
                                    })
                                }, template.templateId))
                        }) : /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                            children: [
                                !(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(templateList.albums) && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                                    children: [
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h3", {
                                            children: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Strings.album)
                                        }),
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().templateList),
                                            children: templateList.albums.map((album)=>{
                                                return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().albumItemWrapper),
                                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_item__WEBPACK_IMPORTED_MODULE_18__/* .TemplateItem */ .c, {
                                                        bannerDesc: {
                                                            title: album.name,
                                                            desc: album.description
                                                        },
                                                        templateId: album.albumId,
                                                        height: 200,
                                                        img: (0,_template_choice__WEBPACK_IMPORTED_MODULE_17__/* .imgUrl */ .X)(album.cover || defaultBanner, 200),
                                                        onClick: openTemplateAlbumDetail,
                                                        isOfficial: isOfficial
                                                    })
                                                }, album.albumId);
                                            })
                                        })
                                    ]
                                }),
                                !(0,lodash__WEBPACK_IMPORTED_MODULE_5__.isEmpty)(templateList.templates) && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                                    children: [
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("h3", {
                                            children: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_1__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Strings.template)
                                        }),
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().templateList),
                                            children: templateList.templates.map((template)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_19___default().templateItemWrapper),
                                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_item__WEBPACK_IMPORTED_MODULE_18__/* .TemplateItem */ .c, {
                                                        type: "card",
                                                        nodeType: template.nodeType,
                                                        templateId: template.templateId,
                                                        img: (0,_template_choice__WEBPACK_IMPORTED_MODULE_17__/* .imgUrl */ .X)(template.cover || defaultBanner, 160),
                                                        name: template.templateName,
                                                        description: template.description,
                                                        tags: template.tags,
                                                        isOfficial: isOfficial,
                                                        creator: {
                                                            name: template.nickName,
                                                            avatar: template.avatar,
                                                            userId: template.uuid
                                                        },
                                                        deleteTemplate: delTemplateConfirm,
                                                        usingTemplate: setUsingTemplate,
                                                        onClick: openTemplateDetail
                                                    })
                                                }, template.templateId))
                                        })
                                    ]
                                })
                            ]
                        })
                    })
                ]
            })
        })
    });
};

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 22778:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "X": () => (/* reexport safe */ _template_choice__WEBPACK_IMPORTED_MODULE_0__.X),
/* harmony export */   "f": () => (/* reexport safe */ _template_choice__WEBPACK_IMPORTED_MODULE_0__.f)
/* harmony export */ });
/* harmony import */ var _template_choice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(31208);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_template_choice__WEBPACK_IMPORTED_MODULE_0__]);
_template_choice__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
/**
 * APITable <https://github.com/apitable/apitable>
 * Copyright (C) 2022 APITable Ltd. <https://apitable.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */ 

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 31208:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "X": () => (/* binding */ imgUrl),
/* harmony export */   "f": () => (/* binding */ TemplateChoice)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apitable_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(64754);
/* harmony import */ var _apitable_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(23440);
/* harmony import */ var _apitable_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apitable_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(12746);
/* harmony import */ var context_template_recommend__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1450);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(46517);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var pc_components_route_manager_navigation_to_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(51331);
/* harmony import */ var pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72932);
/* harmony import */ var pc_utils_env__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(85421);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(6022);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var react_responsive_carousel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(74508);
/* harmony import */ var react_responsive_carousel__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_responsive_carousel__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _template_category_detail_style_module_less__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(7958);
/* harmony import */ var _template_category_detail_style_module_less__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_template_category_detail_style_module_less__WEBPACK_IMPORTED_MODULE_14__);
/* harmony import */ var _template_item__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(61171);
/* harmony import */ var _style_module_less__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(42102);
/* harmony import */ var _style_module_less__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_style_module_less__WEBPACK_IMPORTED_MODULE_12__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_apitable_components__WEBPACK_IMPORTED_MODULE_1__, pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__, _template_item__WEBPACK_IMPORTED_MODULE_11__]);
([_apitable_components__WEBPACK_IMPORTED_MODULE_1__, pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__, _template_item__WEBPACK_IMPORTED_MODULE_11__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
/**
 * APITable <https://github.com/apitable/apitable>
 * Copyright (C) 2022 APITable Ltd. <https://apitable.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */ 















const defaultBanner = (0,_apitable_core__WEBPACK_IMPORTED_MODULE_2__.integrateCdnHost)(_apitable_core__WEBPACK_IMPORTED_MODULE_2__.Settings.workbench_folder_default_cover_list.value.split(",")[0]);
const imgUrl = (token, imageHeight)=>{
    return (0,_apitable_core__WEBPACK_IMPORTED_MODULE_2__.getImageThumbSrc)(token, {
        h: Math.ceil(imageHeight * 2),
        quality: 90
    });
};
const TemplateChoice = (props)=>{
    const { setUsingTemplate  } = props;
    const { 0: _templateRecommendData , 1: setTemplateRecommendData  } = (0,react__WEBPACK_IMPORTED_MODULE_8__.useState)();
    const categoryId = (0,react_redux__WEBPACK_IMPORTED_MODULE_9__.useSelector)((state)=>state.pageParams.categoryId);
    const spaceId = (0,react_redux__WEBPACK_IMPORTED_MODULE_9__.useSelector)((state)=>state.space.activeId);
    const { recommendData: templateRecommendData  } = (0,react__WEBPACK_IMPORTED_MODULE_8__.useContext)(context_template_recommend__WEBPACK_IMPORTED_MODULE_3__/* .TemplateRecommendContext */ .G);
    const env = (0,pc_utils_env__WEBPACK_IMPORTED_MODULE_7__/* .getEnvVariables */ .Sy)();
    (0,react__WEBPACK_IMPORTED_MODULE_8__.useEffect)(()=>{
        if (templateRecommendData) {
            setTemplateRecommendData(templateRecommendData);
            return;
        }
        _apitable_core__WEBPACK_IMPORTED_MODULE_2__.Api.templateRecommend().then((res)=>{
            const { data , success  } = res.data;
            if (success) {
                setTemplateRecommendData(data);
            }
        });
    }, [
        templateRecommendData
    ]);
    const openTemplateDetail = ({ templateId  })=>{
        pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__/* .Router.push */ .F.push(_apitable_core__WEBPACK_IMPORTED_MODULE_2__.Navigation.TEMPLATE, {
            params: {
                spaceId,
                templateId,
                categoryId: categoryId || _apitable_core__WEBPACK_IMPORTED_MODULE_2__.ConfigConstant.TEMPLATE_CHOICE_CATEGORY_ID
            }
        });
    };
    const openTemplateAlbumDetail = ({ templateId  })=>{
        pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__/* .Router.push */ .F.push(_apitable_core__WEBPACK_IMPORTED_MODULE_2__.Navigation.TEMPLATE, {
            params: {
                spaceId,
                albumId: templateId,
                categoryId: "album"
            }
        });
    };
    if (!_templateRecommendData) {
        console.log({
            cc: _templateRecommendData
        });
        return null;
    }
    const carouselItems = (0,lodash__WEBPACK_IMPORTED_MODULE_4__.take)(_templateRecommendData.top, _templateRecommendData.top?.length - 2);
    const firstTop = carouselItems[0];
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().templateChoiceWrapper),
        children: [
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_13__/* .Row */ .X2, {
                className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().templateChoice),
                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_13__/* .Col */ .JX, {
                    span: 24,
                    children: [
                        _templateRecommendData.top && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                            children: [
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().topBannerWrapper),
                                    id: _apitable_core__WEBPACK_IMPORTED_MODULE_2__.TEMPLATE_CENTER_ID.TOP_HOT_BANNER,
                                    children: carouselItems.length === 1 ? /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_item__WEBPACK_IMPORTED_MODULE_11__/* .TemplateItem */ .c, {
                                        templateId: firstTop.templateId,
                                        height: 280,
                                        img: imgUrl(firstTop.image, 280),
                                        onClick: openTemplateDetail,
                                        bannerDesc: {
                                            title: firstTop.title,
                                            color: firstTop?.color,
                                            desc: firstTop.desc
                                        },
                                        usingTemplate: setUsingTemplate
                                    }) : /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(react_responsive_carousel__WEBPACK_IMPORTED_MODULE_10__.Carousel, {
                                        showThumbs: false,
                                        showArrows: false,
                                        showStatus: false,
                                        autoPlay: true,
                                        infiniteLoop: true,
                                        swipeable: true,
                                        children: carouselItems.map((topItem)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_item__WEBPACK_IMPORTED_MODULE_11__/* .TemplateItem */ .c, {
                                                templateId: topItem.templateId,
                                                height: 280,
                                                img: imgUrl(topItem.image, 280),
                                                onClick: openTemplateDetail,
                                                bannerDesc: {
                                                    title: topItem.title,
                                                    color: topItem?.color,
                                                    desc: topItem.desc
                                                },
                                                usingTemplate: setUsingTemplate
                                            }, topItem.templateId))
                                    })
                                }),
                                /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().recommendWrapper),
                                    children: (0,lodash__WEBPACK_IMPORTED_MODULE_4__.takeRight)(_templateRecommendData.top, 2).map((template)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().recommendItem),
                                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_item__WEBPACK_IMPORTED_MODULE_11__/* .TemplateItem */ .c, {
                                                height: 160,
                                                templateId: template.templateId,
                                                img: imgUrl(template.image, 160),
                                                onClick: openTemplateDetail,
                                                bannerDesc: {
                                                    title: template.title,
                                                    desc: template.desc
                                                },
                                                bannerType: _apitable_core__WEBPACK_IMPORTED_MODULE_2__.ConfigConstant.BannerType.MIDDLE,
                                                usingTemplate: setUsingTemplate
                                            })
                                        }, template.image))
                                })
                            ]
                        }),
                        _templateRecommendData.albumGroups?.map((albumGroup)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_13__/* .Row */ .X2, {
                                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_13__/* .Col */ .JX, {
                                    span: 24,
                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().category),
                                    children: [
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_13__/* .Row */ .X2, {
                                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().categoryName),
                                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_13__/* .Col */ .JX, {
                                                span: 24,
                                                children: albumGroup.name
                                            })
                                        }),
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().templateList),
                                            children: albumGroup.albums.map((album)=>{
                                                return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                                    className: (_template_category_detail_style_module_less__WEBPACK_IMPORTED_MODULE_14___default().albumItemWrapper),
                                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_item__WEBPACK_IMPORTED_MODULE_11__/* .TemplateItem */ .c, {
                                                        bannerDesc: {
                                                            title: album.name,
                                                            desc: album.description
                                                        },
                                                        templateId: album.albumId,
                                                        height: 200,
                                                        img: imgUrl(album.cover || defaultBanner, 200),
                                                        onClick: openTemplateAlbumDetail,
                                                        isOfficial: true
                                                    })
                                                }, album.albumId);
                                            })
                                        })
                                    ]
                                })
                            }, albumGroup.name)),
                        _templateRecommendData.templateGroups && _templateRecommendData.templateGroups.map((category)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_13__/* .Row */ .X2, {
                                children: /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(antd__WEBPACK_IMPORTED_MODULE_13__/* .Col */ .JX, {
                                    span: 24,
                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().category),
                                    children: [
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_13__/* .Row */ .X2, {
                                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().categoryName),
                                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(antd__WEBPACK_IMPORTED_MODULE_13__/* .Col */ .JX, {
                                                span: 24,
                                                children: category.name
                                            })
                                        }),
                                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().templateList),
                                            children: category.templates.map((template)=>{
                                                return /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().templateItemWrapper),
                                                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_item__WEBPACK_IMPORTED_MODULE_11__/* .TemplateItem */ .c, {
                                                        templateId: template.templateId,
                                                        type: "card",
                                                        nodeType: template.nodeType,
                                                        img: imgUrl(template.cover || defaultBanner, 160),
                                                        name: template.templateName,
                                                        description: template.description,
                                                        tags: template.tags,
                                                        onClick: openTemplateDetail,
                                                        usingTemplate: setUsingTemplate,
                                                        isOfficial: true
                                                    })
                                                }, template.templateId);
                                            })
                                        })
                                    ]
                                })
                            }, category.name))
                    ]
                })
            }),
            env.TEMPLATE_FEEDBACK_FORM_URL && !(0,pc_utils_env__WEBPACK_IMPORTED_MODULE_7__/* .isMobileApp */ .k)() && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_apitable_components__WEBPACK_IMPORTED_MODULE_1__.Typography, {
                className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().notFoundTip),
                variant: "body2",
                align: "center",
                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("span", {
                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_12___default().text),
                    onClick: ()=>(0,pc_components_route_manager_navigation_to_url__WEBPACK_IMPORTED_MODULE_5__/* .navigationToUrl */ .S)(`${env.TEMPLATE_FEEDBACK_FORM_URL}`),
                    children: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_2__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_2__.Strings.template_not_found)
                })
            })
        ]
    });
};

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 61171:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "c": () => (/* reexport safe */ _template_item__WEBPACK_IMPORTED_MODULE_0__.c)
/* harmony export */ });
/* harmony import */ var _template_item__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2356);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_template_item__WEBPACK_IMPORTED_MODULE_0__]);
_template_item__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
/**
 * APITable <https://github.com/apitable/apitable>
 * Copyright (C) 2022 APITable Ltd. <https://apitable.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */ 

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 2356:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "c": () => (/* binding */ TemplateItem)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apitable_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(64754);
/* harmony import */ var _apitable_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(23440);
/* harmony import */ var _apitable_core__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_apitable_core__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _apitable_icons__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65846);
/* harmony import */ var _apitable_icons__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_apitable_icons__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(59003);
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var pc_components_common_avatar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(47917);
/* harmony import */ var pc_components_common_button_base_button_base__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(48123);
/* harmony import */ var pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(75914);
/* harmony import */ var pc_components_common_tag_tag__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(25947);
/* harmony import */ var pc_components_multi_grid_format_trigger__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(52907);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(6022);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_11__);
/* harmony import */ var static_icon_template_template_img_cardbg_svg__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(2369);
/* harmony import */ var _style_module_less__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(36475);
/* harmony import */ var _style_module_less__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_style_module_less__WEBPACK_IMPORTED_MODULE_13__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_apitable_components__WEBPACK_IMPORTED_MODULE_1__, pc_components_common_avatar__WEBPACK_IMPORTED_MODULE_5__, pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_7__, pc_components_common_tag_tag__WEBPACK_IMPORTED_MODULE_8__, pc_components_multi_grid_format_trigger__WEBPACK_IMPORTED_MODULE_9__]);
([_apitable_components__WEBPACK_IMPORTED_MODULE_1__, pc_components_common_avatar__WEBPACK_IMPORTED_MODULE_5__, pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_7__, pc_components_common_tag_tag__WEBPACK_IMPORTED_MODULE_8__, pc_components_multi_grid_format_trigger__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
/**
 * APITable <https://github.com/apitable/apitable>
 * Copyright (C) 2022 APITable Ltd. <https://apitable.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */ 













var Types;
(function(Types) {
    Types["BANNER"] = "banner";
    Types["CARD"] = "card";
})(Types || (Types = {}));
const DESC_MAX_LEN = 200;
const TemplateItem = (props)=>{
    const colors = (0,_apitable_components__WEBPACK_IMPORTED_MODULE_1__.useThemeColors)();
    const { img , name , description , templateId , creator , deleteTemplate , usingTemplate , nodeType , onClick , bannerDesc , tags , height =160 , type =Types.BANNER , isOfficial =true , bannerType =_apitable_core__WEBPACK_IMPORTED_MODULE_2__.ConfigConstant.BannerType.LARGE ,  } = props;
    const { 0: showPopup , 1: setShowPopup  } = (0,react__WEBPACK_IMPORTED_MODULE_10__.useState)(false);
    const { user , spaceResource  } = (0,react_redux__WEBPACK_IMPORTED_MODULE_11__.useSelector)((state)=>({
            user: state.user.info,
            spaceResource: state.spacePermissionManage.spaceResource
        }), react_redux__WEBPACK_IMPORTED_MODULE_11__.shallowEqual);
    const delTemplate = ()=>{
        setShowPopup(false);
        if (templateId && deleteTemplate) {
            deleteTemplate(templateId);
        }
    };
    const useTemplate = ()=>{
        setShowPopup(false);
        usingTemplate?.(templateId);
    };
    const isAction = Boolean(usingTemplate || deleteTemplate);
    const convertDescription = (description, nodeType)=>{
        if (nodeType === _apitable_core__WEBPACK_IMPORTED_MODULE_2__.ConfigConstant.NodeType.DATASHEET) {
            return convertDatasheetDesc(description);
        }
        if (nodeType === _apitable_core__WEBPACK_IMPORTED_MODULE_2__.ConfigConstant.NodeType.FOLDER) {
            return convertFolderDesc(description);
        }
        return description;
    };
    const convertFolderDesc = (description)=>{
        const desc = JSON.parse(description);
        let content = "";
        let num = 0;
        if (desc.hasOwnProperty("blocks")) {
            for (const block of desc.blocks){
                if (block.type === "paragraph" && num <= DESC_MAX_LEN) {
                    if (block.data.text.length + content.length > DESC_MAX_LEN) {
                        content += block.data.text.slice(0, DESC_MAX_LEN - num);
                        return content;
                    }
                    content += block.data.text;
                    num += block.data.text.length;
                }
            }
        } else if (typeof desc.text === "string") {
            content = desc.text.slice(0, DESC_MAX_LEN);
        } else if (typeof desc.data === "string") {
            content = desc.data.replace(/<\/?.+?>/g, "").slice(0, DESC_MAX_LEN);
        }
        return content;
    };
    const convertDatasheetDesc = (description)=>{
        const desc = JSON.parse(description);
        let content = "";
        let num = 0;
        if (desc.data && Array.isArray(desc.data.ops)) {
            for (const op of desc.data.ops){
                if (!op.attributes && num <= DESC_MAX_LEN) {
                    if (op.insert.length + content.length > DESC_MAX_LEN) {
                        content += op.insert.slice(0, DESC_MAX_LEN - num);
                        return content;
                    }
                    content += op.insert;
                    num += op.insert.length;
                }
            }
        } else if (typeof desc.render === "string") {
            content = desc.render.replace(/<\/?.+?>/g, "").slice(0, DESC_MAX_LEN);
        }
        return content;
    };
    const menu = ()=>{
        const deletable = !isOfficial && (user?.isMainAdmin || spaceResource?.permissions.includes(_apitable_core__WEBPACK_IMPORTED_MODULE_2__.ConfigConstant.PermissionCode.TEMPLATE) || creator && creator.userId === user?.uuid);
        return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().moreContextMenu),
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().contextMenuItem),
                    onClick: useTemplate,
                    children: [
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_apitable_icons__WEBPACK_IMPORTED_MODULE_3__.PlanetOutlined, {
                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().icon)
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().name),
                            children: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_2__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_2__.Strings.use_the_template)
                        })
                    ]
                }),
                deletable && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().contextMenuItem),
                    onClick: delTemplate,
                    children: [
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_apitable_icons__WEBPACK_IMPORTED_MODULE_3__.DeleteOutlined, {
                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().icon)
                        }),
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().name),
                            children: (0,_apitable_core__WEBPACK_IMPORTED_MODULE_2__.t)(_apitable_core__WEBPACK_IMPORTED_MODULE_2__.Strings["delete"])
                        })
                    ]
                })
            ]
        });
    };
    const stopPropagation = (e)=>{
        e.stopPropagation();
        e.nativeEvent.stopImmediatePropagation();
    };
    const handleClick = (event)=>{
        onClick && onClick({
            event,
            templateId
        });
    };
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: classnames__WEBPACK_IMPORTED_MODULE_4___default()((_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().templateItem), {
            [(_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().card)]: type == Types.CARD
        }),
        onClick: handleClick,
        children: [
            isAction && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                onClick: stopPropagation,
                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_7__/* .ComponentDisplay */ .d, {
                    minWidthCompatible: pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_7__/* .ScreenSize.md */ ._.md,
                    children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_multi_grid_format_trigger__WEBPACK_IMPORTED_MODULE_9__/* .MyTrigger */ .l, {
                        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().moreBtnWrapper),
                        showPopup: showPopup,
                        setShowPopup: setShowPopup,
                        popup: menu(),
                        popupStyle: {
                            width: 240,
                            zIndex: 101
                        },
                        popupAlign: {
                            points: [
                                "tl",
                                "tl"
                            ],
                            offset: [
                                0,
                                40
                            ],
                            overflow: {
                                adjustX: true,
                                adjustY: true
                            }
                        },
                        trigger: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_common_button_base_button_base__WEBPACK_IMPORTED_MODULE_6__/* .ButtonBase */ .X, {
                            size: "x-small",
                            shape: "circle",
                            shadow: true,
                            icon: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_apitable_icons__WEBPACK_IMPORTED_MODULE_3__.MoreOutlined, {
                                color: colors.secondLevelText
                            }),
                            className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().moreBtn)
                        })
                    })
                })
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()((_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().wrapper), {
                    [(_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().banner)]: type === Types.BANNER,
                    [(_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().mediumBanner)]: bannerType === _apitable_core__WEBPACK_IMPORTED_MODULE_2__.ConfigConstant.BannerType.MIDDLE
                }),
                style: {
                    height: `${height}px`
                },
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().backgroundImage),
                        style: {
                            backgroundImage: `url(${img})`
                        }
                    }),
                    creator && !isOfficial && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                        children: [
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(static_icon_template_template_img_cardbg_svg__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .Z, {
                                className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().avatarBackground)
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().userAvatar),
                                "data-name": creator.name,
                                children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_common_avatar__WEBPACK_IMPORTED_MODULE_5__/* .Avatar */ .qE, {
                                    id: creator.userId,
                                    src: creator.avatar,
                                    title: creator.name,
                                    size: pc_components_common_avatar__WEBPACK_IMPORTED_MODULE_5__/* .AvatarSize.Size32 */ .DZ.Size32
                                })
                            })
                        ]
                    }),
                    bannerDesc && type === Types.BANNER && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                        className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("bannerDesc", (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().bannerDesc)),
                        children: [
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_apitable_components__WEBPACK_IMPORTED_MODULE_1__.Typography, {
                                variant: "h6",
                                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("title", (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().title)),
                                style: bannerDesc.color ? {
                                    color: bannerDesc.color
                                } : undefined,
                                children: bannerDesc.title
                            }),
                            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                                className: classnames__WEBPACK_IMPORTED_MODULE_4___default()("desc", (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().desc)),
                                style: bannerDesc.color ? {
                                    color: bannerDesc.color
                                } : undefined,
                                children: bannerDesc.desc
                            })
                        ]
                    })
                ]
            }),
            type !== Types.BANNER && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().templateInfo),
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_apitable_components__WEBPACK_IMPORTED_MODULE_1__.Typography, {
                        variant: "h6",
                        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().name),
                        ellipsis: true,
                        children: name
                    }),
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_apitable_components__WEBPACK_IMPORTED_MODULE_1__.Typography, {
                        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().desc),
                        ellipsis: {
                            rows: 2
                        },
                        variant: "body3",
                        children: description && convertDescription(description, nodeType)
                    }),
                    tags && tags.length !== 0 && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx("div", {
                        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().tags),
                        children: tags.map((tag, index)=>/*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_common_tag_tag__WEBPACK_IMPORTED_MODULE_8__/* .Tag */ .V, {
                                className: (_style_module_less__WEBPACK_IMPORTED_MODULE_13___default().tag),
                                children: tag
                            }, index))
                    })
                ]
            })
        ]
    });
};

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 85420:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _template_preview__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22664);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_template_preview__WEBPACK_IMPORTED_MODULE_0__]);
_template_preview__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];
/**
 * APITable <https://github.com/apitable/apitable>
 * Copyright (C) 2022 APITable Ltd. <https://apitable.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */ 
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_template_preview__WEBPACK_IMPORTED_MODULE_0__/* .TemplatePreview */ .w);

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ }),

/***/ 22664:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "w": () => (/* binding */ TemplatePreview)
/* harmony export */ });
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20997);
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _apitable_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23440);
/* harmony import */ var _apitable_core__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_apitable_core__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ahooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57398);
/* harmony import */ var ahooks__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ahooks__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75914);
/* harmony import */ var pc_components_common_side__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(40994);
/* harmony import */ var enterprise__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(14463);
/* harmony import */ var pc_components_mobile_bar__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(42729);
/* harmony import */ var pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72932);
/* harmony import */ var pc_hooks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(22829);
/* harmony import */ var pc_utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(70220);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(16689);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(6022);
/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react_redux__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _template_category_detail__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(61211);
/* harmony import */ var _template_choice__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(22778);
/* harmony import */ var _using_template_modal__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(21882);
/* harmony import */ var _style_module_less__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(9092);
/* harmony import */ var _style_module_less__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_style_module_less__WEBPACK_IMPORTED_MODULE_14__);
var __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__, pc_components_common_side__WEBPACK_IMPORTED_MODULE_4__, pc_components_mobile_bar__WEBPACK_IMPORTED_MODULE_5__, pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__, pc_hooks__WEBPACK_IMPORTED_MODULE_7__, pc_utils__WEBPACK_IMPORTED_MODULE_8__, _template_category_detail__WEBPACK_IMPORTED_MODULE_11__, _template_choice__WEBPACK_IMPORTED_MODULE_12__, _using_template_modal__WEBPACK_IMPORTED_MODULE_13__]);
([pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__, pc_components_common_side__WEBPACK_IMPORTED_MODULE_4__, pc_components_mobile_bar__WEBPACK_IMPORTED_MODULE_5__, pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__, pc_hooks__WEBPACK_IMPORTED_MODULE_7__, pc_utils__WEBPACK_IMPORTED_MODULE_8__, _template_category_detail__WEBPACK_IMPORTED_MODULE_11__, _template_choice__WEBPACK_IMPORTED_MODULE_12__, _using_template_modal__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);
/**
 * APITable <https://github.com/apitable/apitable>
 * Copyright (C) 2022 APITable Ltd. <https://apitable.com>
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */ 




// @ts-ignore












const TemplatePreview = ()=>{
    // Template ID to use
    const { 0: usingTemplate , 1: setUsingTemplate  } = (0,react__WEBPACK_IMPORTED_MODULE_9__.useState)("");
    const { 0: openLoginModal , 1: setOpenLoginModal  } = (0,react__WEBPACK_IMPORTED_MODULE_9__.useState)(false);
    const userInfo = (0,react_redux__WEBPACK_IMPORTED_MODULE_10__.useSelector)((state)=>state.user.info);
    const spaceId = (0,react_redux__WEBPACK_IMPORTED_MODULE_10__.useSelector)((state)=>state.space.activeId);
    const { categoryId , templateId  } = (0,react_redux__WEBPACK_IMPORTED_MODULE_10__.useSelector)((state)=>state.pageParams);
    const { getLoginStatusReq  } = (0,pc_hooks__WEBPACK_IMPORTED_MODULE_7__/* .useUserRequest */ .CL)();
    const { run: getLoginStatus  } = (0,ahooks__WEBPACK_IMPORTED_MODULE_2__.useRequest)(getLoginStatusReq, {
        manual: true
    });
    // Is the current display the official template or the space site template
    const isOfficial = categoryId === "tpcprivate";
    const templateCategory = (0,react_redux__WEBPACK_IMPORTED_MODULE_10__.useSelector)((state)=>state.templateCentre.category);
    (0,react__WEBPACK_IMPORTED_MODULE_9__.useEffect)(()=>{
        if (usingTemplate && !spaceId && !userInfo) {
            pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__/* .Router.redirect */ .F.redirect(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Navigation.LOGIN);
            return;
        }
        // Current user is logged in
        if (userInfo && userInfo.spaceId && usingTemplate && !spaceId) {
            pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__/* .Router.push */ .F.push(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Navigation.TEMPLATE, {
                params: {
                    categoryId,
                    templateId: usingTemplate,
                    spaceId: userInfo.spaceId
                }
            });
            return;
        }
    // eslint-disable-next-line
    }, [
        usingTemplate
    ]);
    const afterLogin = async (data, loginMode)=>{
        if (data) {
            if (loginMode === _apitable_core__WEBPACK_IMPORTED_MODULE_1__.ConfigConstant.LoginMode.PHONE) {
                pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__/* .Router.push */ .F.push(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Navigation.INVITATION_VALIDATION, {
                    query: {
                        token: data,
                        reference: window.location.href
                    }
                });
            } else if (loginMode === _apitable_core__WEBPACK_IMPORTED_MODULE_1__.ConfigConstant.LoginMode.MAIL) {
                pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__/* .Router.push */ .F.push(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Navigation.IMPROVING_INFO, {
                    query: {
                        token: data,
                        reference: window.location.href
                    }
                });
            }
        } else {
            const userInfo = await getLoginStatus();
            if (!userInfo) {
                return;
            }
            pc_components_route_manager_router__WEBPACK_IMPORTED_MODULE_6__/* .Router.push */ .F.push(_apitable_core__WEBPACK_IMPORTED_MODULE_1__.Navigation.TEMPLATE, {
                params: {
                    categoryId,
                    templateId: usingTemplate,
                    spaceId: userInfo.spaceId
                }
            });
        }
    };
    const MainComponent = ()=>/*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
            children: [
                /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                    className: (_style_module_less__WEBPACK_IMPORTED_MODULE_14___default().templateList),
                    children: [
                        /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__/* .ComponentDisplay */ .d, {
                            maxWidthCompatible: pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__/* .ScreenSize.md */ ._.md,
                            children: /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_mobile_bar__WEBPACK_IMPORTED_MODULE_5__/* .MobileBar */ .M, {})
                        }),
                        categoryId === _apitable_core__WEBPACK_IMPORTED_MODULE_1__.ConfigConstant.TEMPLATE_CHOICE_CATEGORY_ID && !templateId || !categoryId ? /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_choice__WEBPACK_IMPORTED_MODULE_12__/* .TemplateChoice */ .f, {
                            setUsingTemplate: setUsingTemplate
                        }) : /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_template_category_detail__WEBPACK_IMPORTED_MODULE_11__/* .TemplateCategoryDetail */ .R, {
                            isOfficial: isOfficial,
                            templateCategory: templateCategory || [],
                            setUsingTemplate: setUsingTemplate
                        })
                    ]
                }),
                usingTemplate && userInfo && spaceId && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(_using_template_modal__WEBPACK_IMPORTED_MODULE_13__/* .UsingTemplateModal */ .S, {
                    templateId: usingTemplate,
                    onCancel: setUsingTemplate
                }),
                openLoginModal && enterprise__WEBPACK_IMPORTED_MODULE_15__.LoginModal && /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(enterprise__WEBPACK_IMPORTED_MODULE_15__.LoginModal, {
                    onCancel: ()=>setOpenLoginModal(false),
                    afterLogin: afterLogin
                })
            ]
        });
    return /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
        className: (_style_module_less__WEBPACK_IMPORTED_MODULE_14___default().templatePreview),
        children: [
            (0,pc_utils__WEBPACK_IMPORTED_MODULE_8__/* .isRenderServer */ .Zt)() && /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div", {
                style: {
                    display: "none"
                },
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_common_side__WEBPACK_IMPORTED_MODULE_4__/* .CommonSide */ .q, {}),
                    MainComponent()
                ]
            }),
            /*#__PURE__*/ (0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__/* .ComponentDisplay */ .d, {
                minWidthCompatible: pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__/* .ScreenSize.md */ ._.md,
                children: [
                    /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_common_side__WEBPACK_IMPORTED_MODULE_4__/* .CommonSide */ .q, {}),
                    MainComponent()
                ]
            }),
            /*#__PURE__*/ react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx(pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__/* .ComponentDisplay */ .d, {
                maxWidthCompatible: pc_components_common_component_display__WEBPACK_IMPORTED_MODULE_3__/* .ScreenSize.md */ ._.md,
                children: MainComponent()
            })
        ]
    });
};

__webpack_async_result__();
} catch(e) { __webpack_async_result__(e); } });

/***/ })

};
;